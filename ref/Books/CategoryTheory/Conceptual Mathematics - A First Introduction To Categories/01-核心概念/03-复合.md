# 复合 (Composition)

**创建日期**: 2025年12月11日
**来源**: Conceptual Mathematics, Article I, Sessions 2-3
**主题编号**: CT.CONCEPTUAL.01.03

---

## 📑 目录

- [复合 (Composition)](#复合-composition)
  - [📑 目录](#-目录)
  - [一、定义](#一定义)
    - [1.1 复合的定义](#11-复合的定义)
    - [1.2 复合的条件](#12-复合的条件)
    - [1.3 复合的记号](#13-复合的记号)
  - [二、复合的运算规则](#二复合的运算规则)
    - [2.1 恒等律](#21-恒等律)
    - [2.2 结合律](#22-结合律)
  - [三、复合的直观理解](#三复合的直观理解)
    - [3.1 过程跟随](#31-过程跟随)
    - [3.2 与数字乘法的类比](#32-与数字乘法的类比)
  - [四、复合的性质](#四复合的性质)
    - [4.1 复合保持单射性](#41-复合保持单射性)
    - [4.2 复合保持满射性](#42-复合保持满射性)
    - [4.3 复合保持双射性](#43-复合保持双射性)
  - [五、典型例子](#五典型例子)
    - [5.1 早餐映射复合](#51-早餐映射复合)
    - [5.2 恒等映射的复合](#52-恒等映射的复合)
    - [5.3 三个映射的复合](#53-三个映射的复合)
  - [六、与其他概念的关系](#六与其他概念的关系)

---

## 一、定义

### 1.1 复合的定义

**复合 (Composition)** 是将两个映射组合成一个新映射的运算。

给定两个映射：

- $A \xrightarrow{g} B$（映射 $g$）
- $B \xrightarrow{f} C$（映射 $f$）

可以构造复合映射：

- $A \xrightarrow{f \circ g} C$（映射 $f \circ g$）

**定义**：对任意 $a \in A$，$(f \circ g)(a) = f(g(a))$。

### 1.2 复合的条件

两个映射可以复合，当且仅当第一个映射的值域等于第二个映射的定义域。

**条件**：给定 $A \xrightarrow{g} B$ 和 $B \xrightarrow{f} C$，可以构造 $A \xrightarrow{f \circ g} C$。

**不可复合的例子**：如果 $A \xrightarrow{g} B$ 和 $C \xrightarrow{f} D$，且 $B \neq C$，则 $f$ 和 $g$ 不能直接复合。

### 1.3 复合的记号

**标准记号**：$f \circ g$ 读作"$f$ 跟随 $g$"或"$f$ 复合 $g$"。

**外部图表示**：
$$
A \xrightarrow{g} B \xrightarrow{f} C \quad \Rightarrow \quad A \xrightarrow{f \circ g} C
$$

**元素记号**：对 $a \in A$，$(f \circ g)(a) = f(g(a))$。

**注意**：复合的顺序是从右到左：先应用 $g$，再应用 $f$。

---

## 二、复合的运算规则

### 2.1 恒等律

**左恒等律**：对任意映射 $A \xrightarrow{f} B$，有 $f \circ 1_A = f$。

**证明**：对任意 $a \in A$，$(f \circ 1_A)(a) = f(1_A(a)) = f(a)$。

**右恒等律**：对任意映射 $A \xrightarrow{f} B$，有 $1_B \circ f = f$。

**证明**：对任意 $a \in A$，$(1_B \circ f)(a) = 1_B(f(a)) = f(a)$。

**外部图表示**：

- 左恒等律：$A \xrightarrow{1_A} A \xrightarrow{f} B = A \xrightarrow{f} B$
- 右恒等律：$A \xrightarrow{f} B \xrightarrow{1_B} B = A \xrightarrow{f} B$

**直观理解**：恒等映射在复合中不起作用，就像数字乘法中的1。

### 2.2 结合律

**结合律 (Associative Law)**：对任意映射 $A \xrightarrow{f} B \xrightarrow{g} C \xrightarrow{h} D$，有：
$$(h \circ g) \circ f = h \circ (g \circ f)$$

**证明**：对任意 $a \in A$：

- 左边：$((h \circ g) \circ f)(a) = (h \circ g)(f(a)) = h(g(f(a)))$
- 右边：$(h \circ (g \circ f))(a) = h((g \circ f)(a)) = h(g(f(a)))$

因此两边相等。

**外部图表示**：
$$
A \xrightarrow{f} B \xrightarrow{g} C \xrightarrow{h} D
$$

可以按两种方式复合：

- $(h \circ g) \circ f$：先复合 $h$ 和 $g$，再与 $f$ 复合
- $h \circ (g \circ f)$：先复合 $g$ 和 $f$，再与 $h$ 复合

**记号简化**：由于结合律，可以省略括号，直接写成 $h \circ g \circ f$。

**直观理解**：复合映射的顺序是固定的（从右到左），但括号的位置不影响结果。

---

## 三、复合的直观理解

### 3.1 过程跟随

复合可以理解为"跟随一个过程后再跟随另一个过程"。

**例子**：设 $A = \{John, Mary, Sam\}$，$B = \{John, Mary, Sam\}$，$C = \{eggs, oatmeal, toast, coffee\}$。

- 映射 $g: A \to B$ 表示"每个人最喜欢的人"：
  - $g(John) = Mary$
  - $g(Mary) = John$
  - $g(Sam) = Mary$

- 映射 $f: B \to C$ 表示"每个人最喜欢的早餐"：
  - $f(John) = eggs$
  - $f(Mary) = coffee$
  - $f(Sam) = coffee$

- 复合映射 $f \circ g: A \to C$ 表示"每个人最喜欢的人最喜欢的早餐"：
  - $(f \circ g)(John) = f(g(John)) = f(Mary) = coffee$
  - $(f \circ g)(Mary) = f(g(Mary)) = f(John) = eggs$
  - $(f \circ g)(Sam) = f(g(Sam)) = f(Mary) = coffee$

### 3.2 与数字乘法的类比

复合与数字乘法有相似之处，但也有重要区别。

**相似之处**：

- 结合律：$(h \circ g) \circ f = h \circ (g \circ f)$ 类似于 $(h \cdot g) \cdot f = h \cdot (g \cdot f)$
- 单位元：恒等映射 $1_A$ 类似于数字1

**区别**：

- 复合不是交换的：一般 $f \circ g \neq g \circ f$（即使两者都有定义）
- 复合需要匹配：只有当第一个映射的值域等于第二个映射的定义域时才能复合

**注意**：不要将映射的复合与对象的乘法混淆。对象的乘法（如 $A \times B$）是范畴中的另一种运算。

---

## 四、复合的性质

### 4.1 复合保持单射性

**定理**：如果 $g: A \to B$ 和 $f: B \to C$ 都是单射，则 $f \circ g: A \to C$ 也是单射。

**证明**：设 $a_1, a_2 \in A$ 且 $(f \circ g)(a_1) = (f \circ g)(a_2)$，即 $f(g(a_1)) = f(g(a_2))$。

由于 $f$ 是单射，有 $g(a_1) = g(a_2)$。

由于 $g$ 是单射，有 $a_1 = a_2$。

因此 $f \circ g$ 是单射。

### 4.2 复合保持满射性

**定理**：如果 $g: A \to B$ 和 $f: B \to C$ 都是满射，则 $f \circ g: A \to C$ 也是满射。

**证明**：对任意 $c \in C$，由于 $f$ 是满射，存在 $b \in B$ 使得 $f(b) = c$。

由于 $g$ 是满射，存在 $a \in A$ 使得 $g(a) = b$。

因此 $(f \circ g)(a) = f(g(a)) = f(b) = c$。

因此 $f \circ g$ 是满射。

### 4.3 复合保持双射性

**定理**：如果 $g: A \to B$ 和 $f: B \to C$ 都是双射，则 $f \circ g: A \to C$ 也是双射。

**证明**：由于双射既是单射又是满射，由上述两个定理，$f \circ g$ 既是单射又是满射，因此是双射。

**逆映射**：如果 $g: A \to B$ 和 $f: B \to C$ 都是双射，则 $(f \circ g)^{-1} = g^{-1} \circ f^{-1}$。

**证明**：

- $(f \circ g) \circ (g^{-1} \circ f^{-1}) = f \circ (g \circ g^{-1}) \circ f^{-1} = f \circ 1_B \circ f^{-1} = f \circ f^{-1} = 1_C$
- $(g^{-1} \circ f^{-1}) \circ (f \circ g) = g^{-1} \circ (f^{-1} \circ f) \circ g = g^{-1} \circ 1_B \circ g = g^{-1} \circ g = 1_A$

因此 $(f \circ g)^{-1} = g^{-1} \circ f^{-1}$。

---

## 五、典型例子

### 5.1 早餐映射复合

设 $A = \{John, Mary, Sam\}$，$B = \{John, Mary, Sam\}$，$C = \{eggs, oatmeal, toast, coffee\}$。

- 映射 $g: A \to B$（每个人最喜欢的人）：
  - $g(John) = Mary$
  - $g(Mary) = John$
  - $g(Sam) = Mary$

- 映射 $f: B \to C$（每个人最喜欢的早餐）：
  - $f(John) = eggs$
  - $f(Mary) = coffee$
  - $f(Sam) = coffee$

- 复合映射 $f \circ g: A \to C$（每个人最喜欢的人最喜欢的早餐）：
  - $(f \circ g)(John) = f(g(John)) = f(Mary) = coffee$
  - $(f \circ g)(Mary) = f(g(Mary)) = f(John) = eggs$
  - $(f \circ g)(Sam) = f(g(Sam)) = f(Mary) = coffee$

### 5.2 恒等映射的复合

对任意映射 $f: A \to B$：

- $f \circ 1_A = f$（左恒等律）
- $1_B \circ f = f$（右恒等律）

### 5.3 三个映射的复合

设 $A \xrightarrow{f} B \xrightarrow{g} C \xrightarrow{h} D$，则：

- $(h \circ g) \circ f = h \circ (g \circ f) = h \circ g \circ f$

**例子**：

- $A = \{1, 2\}$，$B = \{a, b\}$，$C = \{x, y\}$，$D = \{p, q\}$
- $f(1) = a$，$f(2) = b$
- $g(a) = x$，$g(b) = y$
- $h(x) = p$，$h(y) = q$

则 $(h \circ g \circ f)(1) = h(g(f(1))) = h(g(a)) = h(x) = p$。

---

## 六、与其他概念的关系

- **映射 (Map)**：复合是映射之间的运算
- **恒等映射 (Identity Map)**：在复合中起到单位元的作用
- **范畴 (Category)**：复合是范畴的基本运算
- **结合律 (Associative Law)**：复合满足结合律
- **恒等律 (Identity Laws)**：恒等映射在复合中满足恒等律
- **单射 (Injection)**：复合保持单射性
- **满射 (Surjection)**：复合保持满射性
- **双射 (Bijection)**：复合保持双射性
- **同构 (Isomorphism)**：同构的复合是同构

---

**最后更新**: 2025年12月11日
**参考章节**: Article I, Sessions 2-3
