# 范畴等价 (Equivalence of Categories)

**创建日期**: 2025年12月11日
**来源**: Category Theory Using Haskell, Chapter 2
**主题编号**: CT.YUKITA.01.08

---

## 📑 目录

- [范畴等价 (Equivalence of Categories)](#范畴等价-equivalence-of-categories)
  - [📑 目录](#-目录)
  - [一、范畴等价的定义](#一范畴等价的定义)
    - [1.1 范畴同构](#11-范畴同构)
    - [1.2 范畴等价](#12-范畴等价)
    - [1.3 等价与同构的区别](#13-等价与同构的区别)
  - [二、函子范畴](#二函子范畴)
    - [2.1 函子范畴的定义](#21-函子范畴的定义)
    - [2.2 函子范畴的性质](#22-函子范畴的性质)
  - [三、等价函子](#三等价函子)
    - [3.1 等价函子的定义](#31-等价函子的定义)
    - [3.2 完全忠实函子](#32-完全忠实函子)
    - [3.3 本质满函子](#33-本质满函子)
  - [四、Haskell中的范畴等价](#四haskell中的范畴等价)
    - [4.1 类型等价](#41-类型等价)
    - [4.2 函子等价](#42-函子等价)
    - [4.3 范畴等价的应用](#43-范畴等价的应用)

---

## 一、范畴等价的定义

### 1.1 范畴同构

**范畴同构 (Isomorphism of Categories)**：两个范畴 $\mathcal{C}$ 和 $\mathcal{D}$ 是同构的，如果存在函子 $F: \mathcal{C} \to \mathcal{D}$ 和 $G: \mathcal{D} \to \mathcal{C}$ 使得：

- $G \circ F = 1_{\mathcal{C}}$
- $F \circ G = 1_{\mathcal{D}}$

**数学表示**：

- $F$ 和 $G$ 是互逆的函子
- 对象和映射都一一对应

### 1.2 范畴等价

**范畴等价 (Equivalence of Categories)**：两个范畴 $\mathcal{C}$ 和 $\mathcal{D}$ 是等价的，如果存在函子 $F: \mathcal{C} \to \mathcal{D}$ 和 $G: \mathcal{D} \to \mathcal{C}$ 以及自然同构：

- $\eta: 1_{\mathcal{C}} \Rightarrow G \circ F$
- $\epsilon: F \circ G \Rightarrow 1_{\mathcal{D}}$

**数学表示**：

- $F$ 和 $G$ 是"几乎互逆"的函子
- 对象和映射在等价意义下对应

### 1.3 等价与同构的区别

**关键区别**：

- **同构**：要求严格的一一对应
- **等价**：允许"冗余"对象，只要本质结构相同

**例子**：

- 有限集合的范畴与自然数的范畴等价（但不一定同构）
- 预层范畴与原始范畴等价

---

## 二、函子范畴

### 2.1 函子范畴的定义

**函子范畴 (Functor Category)**：对范畴 $\mathcal{C}$ 和 $\mathcal{D}$，函子范畴 $[\mathcal{C}, \mathcal{D}]$ 定义如下：

- **对象**：函子 $F: \mathcal{C} \to \mathcal{D}$
- **映射**：自然变换 $\eta: F \Rightarrow G$
- **恒等**：恒等自然变换 $1_F: F \Rightarrow F$
- **复合**：自然变换的垂直复合

**数学表示**：

- $\text{Ob}([\mathcal{C}, \mathcal{D}]) = \{\text{函子 } F: \mathcal{C} \to \mathcal{D}\}$
- $\text{Hom}(F, G) = \{\text{自然变换 } \eta: F \Rightarrow G\}$

### 2.2 函子范畴的性质

**性质**：

- 函子范畴本身是范畴
- 自然变换的复合满足结合律
- 恒等自然变换满足恒等律

**Haskell对应**：

- 函子对应类型构造子
- 自然变换对应多态函数
- 函子范畴对应类型构造子之间的"关系"

---

## 三、等价函子

### 3.1 等价函子的定义

**等价函子 (Equivalence Functor)**：函子 $F: \mathcal{C} \to \mathcal{D}$ 是等价函子，如果存在函子 $G: \mathcal{D} \to \mathcal{C}$ 使得：

- $G \circ F \cong 1_{\mathcal{C}}$（自然同构）
- $F \circ G \cong 1_{\mathcal{D}}$（自然同构）

**数学表示**：

- $F$ 是等价函子当且仅当它是完全忠实且本质满的

### 3.2 完全忠实函子

**完全函子 (Full Functor)**：函子 $F: \mathcal{C} \to \mathcal{D}$ 是完全的，如果对任意 $A, B \in \mathcal{C}$，映射：

$$F_{A,B}: \text{Hom}(A, B) \to \text{Hom}(F(A), F(B))$$

是满射。

**忠实函子 (Faithful Functor)**：函子 $F: \mathcal{C} \to \mathcal{D}$ 是忠实的，如果对任意 $A, B \in \mathcal{C}$，映射 $F_{A,B}$ 是单射。

**完全忠实函子**：既是完全的又是忠实的函子。

### 3.3 本质满函子

**本质满函子 (Essentially Surjective Functor)**：函子 $F: \mathcal{C} \to \mathcal{D}$ 是本质满的，如果对任意 $D \in \mathcal{D}$，存在 $C \in \mathcal{C}$ 使得 $F(C) \cong D$。

**数学表示**：

- 每个 $\mathcal{D}$ 中的对象都"几乎"是某个 $\mathcal{C}$ 中对象的像

---

## 四、Haskell中的范畴等价

### 4.1 类型等价

**类型等价**：两个类型 `A` 和 `B` 等价，如果存在同构函数：

```haskell
-- 类型等价
type Equiv a b = (a -> b, b -> a)

-- 例子：Maybe () 与 Bool 等价
maybeToBool :: Maybe () -> Bool
maybeToBool Nothing = False
maybeToBool (Just ()) = True

boolToMaybe :: Bool -> Maybe ()
boolToMaybe False = Nothing
boolToMaybe True = Just ()
```

**数学对应**：

- 类型等价对应范畴等价
- 同构函数对应自然同构

### 4.2 函子等价

**函子等价**：两个函子 `F` 和 `G` 等价，如果存在自然同构：

```haskell
-- 自然同构
type NatIso f g = forall a. f a -> g a

-- 例子：Maybe 与 Either () 等价
maybeToEither :: Maybe a -> Either () a
maybeToEither Nothing = Left ()
maybeToEither (Just x) = Right x

eitherToMaybe :: Either () a -> Maybe a
eitherToMaybe (Left ()) = Nothing
eitherToMaybe (Right x) = Just x
```

**数学对应**：

- 函子等价对应范畴等价
- 自然同构对应等价函子

### 4.3 范畴等价的应用

**应用场景**：

- **类型优化**：用等价但更高效的类型替换
- **抽象**：用等价但更抽象的类型表示
- **重构**：保持语义等价的同时改变实现

**例子**：

- `[a]` 与 `Free Monoid a` 等价
- `Maybe a` 与 `Either () a` 等价
- `(a, b)` 与 `(b, a)` 等价（在交换律意义下）

---

**最后更新**: 2025年12月11日
**参考章节**: Chapter 2
