---
msc_primary: "18A99"
msc_secondary: ["14A15"]
---

# 米田引理 - 五种表征

**创建日期**: 2025年12月1日
**领域**: 范畴论
**难度**: L2-L3

---

## 元信息

| 属性 | 内容 |
|------|------|
| **定理** | 米田引理 (Yoneda Lemma) |
| **领域** | 范畴论 |
| **发现者** | 米田信夫 (Nobuo Yoneda, 1954) |
| **前置知识** | 范畴、函子、自然变换 |
| **Mathlib** | `Mathlib.CategoryTheory.Yoneda` |

---

## 一、符号表征（形式化）

### 1.1 严格陈述

**米田引理**：设 C 是局部小范畴，A ∈ C，F: C → Set 是函子，则存在自然双射：

$$\text{Nat}(\text{Hom}_C(A, -), F) \cong F(A)$$

即从可表函子 Hom(A,-) 到F的自然变换与F(A)的元素一一对应。

**对偶形式（反变）**：
$$\text{Nat}(\text{Hom}_C(-, A), F) \cong F(A)$$

### 1.2 米田嵌入

**推论**：米田函子 Y: C → [Cᵒᵖ, Set]，A ↦ Hom(-,A) 是全忠实嵌入。

```text
Y: C ↪ [Cᵒᵖ, Set]
├─ 全（full）：态射满射
├─ 忠实（faithful）：态射单射
└─ C 可嵌入其预层范畴
```

### 1.3 Lean 4 形式化

```lean
import Mathlib.CategoryTheory.Yoneda

-- 米田引理
theorem yoneda_lemma {C : Type*} [Category C] (A : C)
    (F : Cᵒᵖ ⥤ Type*) :
    (yoneda.obj A ⟶ F) ≃ F.obj (Opposite.op A) := by
  exact yonedaEquiv

-- 米田嵌入是全忠实的
theorem yoneda_fully_faithful {C : Type*} [Category C] :
    (yoneda : C ⥤ Cᵒᵖ ⥤ Type*).FullyFaithful := by
  exact Yoneda.yoneda_fullyFaithful

-- 显式双射
def yoneda_bijection {C : Type*} [Category C] (A : C)
    (F : Cᵒᵖ ⥤ Type*) :
    (yoneda.obj A ⟶ F) → F.obj (Opposite.op A) :=
  fun α => α.app (Opposite.op A) (𝟙 A)
```

### 1.4 证明要点

```text
        [米田引理证明]
              │
    ┌─────────┴─────────┐
    │                   │
[构造映射]          [验证双射]
Nat(Hom(A,-),F)     Φ和Ψ互逆
    → F(A)
    │                   │
α ↦ α_A(id_A)      x ↦ (f ↦ F(f)(x))
    │                   │
    └─────────┬─────────┘
              │
        自然性保证良定义
```

**关键洞察**：自然变换 α 完全由 α_A(id_A) 决定！

```text
对任意 f: A → B：

α_B(f) = α_B(f ∘ id_A)
       = F(f)(α_A(id_A))  ← 自然性

所以整个 α 由一个元素 α_A(id_A) ∈ F(A) 决定
```

---

## 二、几何表征（可视化）

### 2.1 核心图示

```text
        [米田引理的直觉]
              │
    Hom(A,-) 是A的"探测器"
              │
    ┌─────────┴─────────┐
    │                   │
[可表函子]          [自然变换]
Hom(A,B)            α: Hom(A,-)→F
"A看B的方式"        "一致的选择"
    │                   │
    └─────────┬─────────┘
              │
        α 由 α_A(id_A) 完全决定
```

### 2.2 "点"的概念

```text
在集合范畴Set中：

    Hom({*}, X) ≅ X

一个点 x ∈ X 对应一个映射 * ↦ x

米田引理推广这个想法：
├─ F(A) 是"A-形状的点"
├─ Hom(A,-) 是"用A探测"
└─ 自然变换 = 一致的探测方式
```

### 2.3 图表示意

```text
        [自然变换 α 的结构]

    A ──f──→ B
    │        │
Hom(A,A) Hom(A,B)
    │        │
  α_A↓      ↓α_B
    │        │
  F(A) ──→ F(B)
       F(f)

自然性：α_B(f) = F(f)(α_A(id_A))

一切由 α_A(id_A) 这一个元素决定！
```

---

## 三、直觉表征（类比）

### 3.1 一句话解释

> **米田引理**：对象由它与所有其他对象的关系完全决定——"你是谁取决于你认识谁"

### 3.2 生活类比

**社交网络类比**：

```text
人 A 的"社交身份" = A与所有人的关系
├─ Hom(A, B) = A认识B的所有方式
├─ Hom(A, -) = A的整个社交网络
└─ 米田引理：社交网络完全决定了你是谁

如果两个人的社交网络完全相同
（与每个人的关系都一样）
那么在社交意义上他们是"同一个人"
```

**探针类比**：

```text
用各种探针探测未知物体：

物体 X
├─ 用探针A探测 → 得到信息 Hom(A, X)
├─ 用探针B探测 → 得到信息 Hom(B, X)
├─ ...
└─ 所有探针信息 = Hom(-, X) = 完整描述X

米田引理：所有探测结果完全决定物体
```

### 3.3 为什么是真的？

**核心逻辑**：

```text
自然变换 α: Hom(A,-) → F 满足自然性条件

对任意 f: A → B：

    Hom(A,A) ──α_A──→ F(A)
        │               │
     f∘-│               │F(f)
        ↓               ↓
    Hom(A,B) ──α_B──→ F(B)

取 id_A ∈ Hom(A,A)：
├─ 沿右下走：F(f)(α_A(id_A))
├─ 沿下右走：α_B(f ∘ id_A) = α_B(f)
└─ 相等！所以 α_B(f) = F(f)(α_A(id_A))

结论：α 完全由 α_A(id_A) 决定
```

---

## 四、计算表征（算法）

### 4.1 Python实现（概念演示）

```python
from typing import Dict, Callable, TypeVar, Generic

# 简化的范畴实现
class Category:
    def __init__(self, objects, hom, compose, identity):
        self.objects = objects
        self.hom = hom  # hom(A, B) 返回 A→B 的态射集合
        self.compose = compose
        self.identity = identity

def yoneda_lemma_demo():
    """
    演示米田引理：Nat(Hom(A,-), F) ≅ F(A)

    使用有限范畴作为例子
    """
    # 简单范畴：三个对象 0, 1, 2，态射是≤关系
    objects = [0, 1, 2]

    def hom(a, b):
        """偏序范畴：a→b 当且仅当 a≤b"""
        return [(a, b)] if a <= b else []

    # 函子 F: C → Set（例如：F(n) = {0,1,...,n}）
    def F(n):
        return set(range(n + 1))

    def F_map(f):
        """F在态射上的作用"""
        a, b = f
        return lambda x: x  # 包含映射

    # 对于对象 A=1，验证米田引理
    A = 1

    # 左边：自然变换 Hom(A,-) → F
    # 由 F(A) 的元素参数化

    print(f"F(A) = F({A}) = {F(A)}")
    print(f"所以有 {len(F(A))} 个自然变换")

    # 每个 x ∈ F(A) 定义一个自然变换
    for x in F(A):
        print(f"\n自然变换 α^{x}:")
        for B in objects:
            print(f"  α^{x}_{B}: Hom({A},{B}) → F({B})")
            for f in hom(A, B):
                # α_B(f) = F(f)(x)
                result = F_map(f)(x)
                print(f"    {f} ↦ {result}")

yoneda_lemma_demo()
```

### 4.2 米田嵌入的验证

```python
def verify_yoneda_embedding():
    """
    验证米田嵌入是全忠实的

    对于有限范畴 C：
    Hom_C(A,B) ≅ Nat(Hom(-,A), Hom(-,B))
    """
    # 使用群的范畴作为例子
    # 对象：群（这里用有限循环群）
    # 态射：群同态

    from math import gcd

    # Z/nZ 到 Z/mZ 的同态数 = gcd(n,m)
    def hom_count(n, m):
        return gcd(n, m)

    # 验证：Hom(Z/6, Z/4) = gcd(6,4) = 2
    print(f"Hom(Z/6, Z/4) 有 {hom_count(6, 4)} 个元素")

    # 米田说这等于自然变换数
    # Nat(Hom(-,Z/6), Hom(-,Z/4))
    # 这确实也是 gcd(6,4) = 2（可以验证）

verify_yoneda_embedding()
```

### 4.3 可表函子的判定

```python
def is_representable(F, C):
    """
    检查函子 F: C → Set 是否可表

    如果存在 A 使得 F ≅ Hom(A,-)
    则 F 可表

    米田引理：F 可表 ⟺ F 有"万有元素"
    """
    for A in C.objects:
        # 检查是否存在 u ∈ F(A)
        # 使得对所有 B 和 x ∈ F(B)
        # 存在唯一 f: A→B 满足 F(f)(u) = x

        for u in F(A):
            is_universal = True
            for B in C.objects:
                for x in F(B):
                    # 检查唯一性
                    witnesses = [f for f in C.hom(A, B)
                                if F.map(f)(u) == x]
                    if len(witnesses) != 1:
                        is_universal = False
                        break
                if not is_universal:
                    break

            if is_universal:
                return True, A, u

    return False, None, None
```

---

## 五、范畴表征（抽象）

### 5.1 米田引理的范畴论意义

```text
        [米田引理的深层意义]
                │
    ┌───────────┼───────────┐
    │           │           │
[嵌入定理]   [表示论]    [2-范畴]
    │           │           │
C ↪ [C^op,Set] 可表函子   自然变换
全忠实嵌入   = Hom函子   = 2-态射
    │           │           │
"点由关系   "函子=      "高阶
决定"        点的视角"    结构"
```

### 5.2 万有性质的统一

```text
米田引理解释了万有性质：

积 A×B 的万有性质：
Hom(X, A×B) ≅ Hom(X,A) × Hom(X,B) 自然

用米田：
A×B 由 Hom(-,A×B) 完全决定
而 Hom(-,A×B) ≅ Hom(-,A) × Hom(-,B)
所以 A×B 由这个等式唯一确定（up to iso）
```

### 5.3 预层范畴

```text
[Cᵒᵖ, Set] = C上的预层范畴

├─ 对象：函子 F: Cᵒᵖ → Set
├─ 态射：自然变换
├─ 米田嵌入 Y: C ↪ [Cᵒᵖ, Set]
└─ C的"自由完备化"

意义：
├─ 所有极限存在
├─ C的对象成为可表预层
└─ 代数几何中的仿射概形
```

### 5.4 高阶推广

```text
        [米田引理的推广]
              │
    ┌─────────┼─────────┐
    │         │         │
[加性版]  [丰富版]   [∞-版]
    │         │         │
阿贝尔范畴 V-范畴    ∞-范畴
Hom是群   Hom是V-对象 同伦论
```

---

## 六、应用与意义

### 6.1 数学中的应用

| 领域 | 应用 |
|------|------|
| **代数几何** | 概形=可表函子 |
| **代数拓扑** | Brown可表性 |
| **表示论** | 可表函子理论 |
| **类型论** | 类型的语义 |

### 6.2 "万有性质即定义"

```text
米田引理证明了：

用万有性质定义的对象是唯一的（up to iso）

例如：
├─ 积：Hom(-,A×B) ≅ Hom(-,A)×Hom(-,B)
├─ 余积：Hom(A+B,-) ≅ Hom(A,-)×Hom(B,-)
├─ 指数：Hom(A×B,C) ≅ Hom(A,C^B)
└─ 这些定义足以唯一确定对象
```

---

## 关联定理

| 定理 | 关系 |
|------|------|
| **伴随函子定理** | 使用可表性 |
| **表示定理** | Riesz等 |
| **Brown可表性** | 同伦论 |
| **Grothendieck构造** | 范畴上的纤维化 |

---

**最后更新**: 2025年12月1日
**状态**: ✅ 完成
