# 大数定律 - 五种表征

**创建日期**: 2025年12月1日
**领域**: 概率论
**难度**: L2

---

## 元信息

| 属性 | 内容 |
|------|------|
| **定理** | 大数定律 (Law of Large Numbers) |
| **领域** | 概率论 |
| **发现者** | Jacob Bernoulli, Chebyshev, Kolmogorov |
| **前置知识** | 期望、收敛性、概率空间 |

---

## 一、符号表征（形式化）

### 1.1 弱大数定律

设X₁, X₂, ...独立同分布，𝔼[Xᵢ] = μ，则：

$$\bar{X}_n = \frac{1}{n}\sum_{i=1}^n X_i \xrightarrow{P} \mu \quad (n \to \infty)$$

（依概率收敛）

### 1.2 强大数定律

若还有𝔼[|X₁|] < ∞，则：

$$\bar{X}_n \xrightarrow{a.s.} \mu \quad (n \to \infty)$$

（几乎必然收敛）

### 1.3 Lean 4 形式化

```lean
-- 强大数定律
theorem strong_law_of_large_numbers {Ω : Type*} [MeasureSpace Ω]
    {X : ℕ → Ω → ℝ} (hX_iid : IID X) (hX_integrable : Integrable (X 0)) :
    ∀ᵐ ω, Tendsto (fun n => (∑ i in Finset.range n, X i ω) / n) atTop (𝓝 (𝔼[X 0])) := by
  sorry  -- 需要概率论形式化
```

---

## 二、几何表征（可视化）

### 2.1 样本均值收敛

```text
样本均值的轨迹：

    X̄ₙ
    ↑
    │   ╱╲╱╲
    │  ╱    ╲╱──────────→ μ
    μ├─────────────────────
    │
    └──────────────────────→ n

随n增大，波动减小，趋近μ
```

### 2.2 概率演化

```text
P(|X̄ₙ - μ| > ε) 随n的变化：

    概率
    ↑
    │╲
    │ ╲
    │  ╲
    │   ╲_____→ 0
    └──────────────→ n
```

---

## 三、直觉表征（类比）

### 3.1 一句话解释

> **大数定律**：做足够多次实验，平均结果会稳定在期望值附近

### 3.2 抛硬币类比

- 每次抛硬币：结果随机
- 多次抛的正面比例 → 1/2
- 次数越多，比例越稳定

### 3.3 为什么"几乎必然"？

存在零概率的"极端路径"不收敛，但"几乎所有"路径都收敛

---

## 四、计算表征（算法）

### 4.1 Python实现

```python
import numpy as np
import matplotlib.pyplot as plt

def demonstrate_lln(dist, mu, n_max=10000, n_paths=5):
    """
    演示大数定律
    """
    plt.figure(figsize=(12, 6))

    ns = np.arange(1, n_max + 1)

    for path in range(n_paths):
        X = dist(n_max)
        cumsum = np.cumsum(X)
        means = cumsum / ns
        plt.plot(ns, means, alpha=0.7, label=f'路径{path+1}')

    plt.axhline(y=mu, color='r', linestyle='--', linewidth=2, label=f'μ = {mu}')
    plt.xlabel('n')
    plt.ylabel('X̄ₙ')
    plt.title('大数定律演示')
    plt.legend()
    plt.xscale('log')
    plt.savefig('lln_demo.png')

# 演示：公平硬币
demonstrate_lln(lambda n: np.random.binomial(1, 0.5, n), mu=0.5)
```

### 4.2 收敛速度（Chebyshev）

```python
def chebyshev_bound(sigma, n, epsilon):
    """
    Chebyshev不等式给出的界
    P(|X̄ₙ - μ| > ε) ≤ σ²/(nε²)
    """
    return sigma**2 / (n * epsilon**2)

# 示例
sigma = 1
epsilon = 0.1
for n in [100, 1000, 10000, 100000]:
    bound = chebyshev_bound(sigma, n, epsilon)
    print(f"n={n}: P(|X̄ₙ - μ| > {epsilon}) ≤ {bound:.6f}")
```

---

## 五、范畴表征（抽象）

### 5.1 范畴视角

```text
大数定律 = 遍历定理的特例
├─ 独立序列：平移不变
├─ 时间平均 = 空间平均（遍历性）
├─ 样本均值 → 期望
└─ Birkhoff遍历定理是推广
```

### 5.2 推广

- **遍历定理**：动力系统中的大数定律
- **马尔可夫链**：依赖序列的大数定律
- **混合条件**：弱依赖下的推广

### 5.3 与概率基础

```text
大数定律是"频率→概率"的数学基础：
├─ 频率：n次实验中事件发生的比例
├─ 概率：理论期望
└─ 大数定律：频率a.s.收敛到概率
```

---

## 关联定理

| 定理 | 关系 |
|------|------|
| **中心极限定理** | 波动的分布 |
| **Birkhoff遍历定理** | 推广到遍历论 |
| **Glivenko-Cantelli** | 经验分布的收敛 |

---

**状态**: ✅ 完成
