# distribution.yaml - 分布概念知识图谱节点
# FormalMath Knowledge Graph - Concept Node
# Created: 2025-12-07

concept:
  id: "distribution"
  name:
    zh: "分布"
    en: "Distribution"
  msc_codes: ["60E05", "60E10"]

  # ===== 定义层 =====
  definition:
    formal: |
      随机变量 X 的分布是概率测度 μ_X，定义为：

      μ_X(B) = P(X ∈ B) = P({ω : X(ω) ∈ B})

      对所有可测集 B 成立。

      分布完全由以下之一确定：
      1. 累积分布函数 F_X(x) = P(X ≤ x)
      2. 概率质量函数 p_X(x) = P(X = x)（离散）
      3. 概率密度函数 f_X(x)（连续）

    informal: |
      分布描述"随机变量取各种值的概率"。

      掷骰子例子：
      - X 的分布：P(X=k) = 1/6, k=1,...,6
      - 这是"均匀分布"

      分布 = "概率的分配方式"

    lean: |
      -- Mathlib定义
      def Distribution (X : Ω → E) : Measure E :=
        P.map X

      -- 累积分布函数
      def CDF (X : Ω → ℝ) (x : ℝ) : ℝ :=
        P {ω | X ω ≤ x}

      -- 概率质量函数（离散）
      def PMF (X : Ω → ℕ) (x : ℕ) : ℝ :=
        P {ω | X ω = x}

      -- 概率密度函数（连续）
      def PDF (X : Ω → ℝ) (x : ℝ) : ℝ :=
        (Distribution X).density (LebesgueMeasure ℝ) x

  # ===== 直觉层 =====
  intuition:
    geometric: |
      【几何直觉】概率"形状"
      - 离散：柱状图（每个值一个柱子）
      - 连续：曲线下的面积
      - 分布 = "概率的几何形状"
      - 不同分布 = 不同"形状"

    algebraic: |
      【代数直觉】测度推前
      - 分布 = 概率测度的"推前"
      - μ_X = P ∘ X⁻¹
      - 是概率测度在值空间上的像

    physical: |
      【物理直觉】状态分布
      - 分布 = "系统处于各种状态的概率"
      - 在统计力学中，分布描述"微观状态分布"
      - 平衡态 = 特定分布（如Boltzmann分布）

    categorical: |
      【范畴直觉】函子作用
      - 分布是概率测度在随机变量作用下的像
      - 是"推前测度"（pushforward measure）
      - 保持概率结构

  # ===== 表征层 =====
  representations:
    - type: "累积分布函数（CDF）"
      content: |
        F_X(x) = P(X ≤ x)

        性质：
        - 单调递增
        - 右连续
        - lim_{x→-∞} F_X(x) = 0
        - lim_{x→+∞} F_X(x) = 1

    - type: "概率质量函数（PMF）"
      content: |
        离散情况：
        p_X(x) = P(X = x)

        Σ_x p_X(x) = 1

    - type: "概率密度函数（PDF）"
      content: |
        连续情况：
        f_X(x) = dF_X(x)/dx

        ∫_{-∞}^{∞} f_X(x) dx = 1

        P(a ≤ X ≤ b) = ∫_a^b f_X(x) dx

    - type: "特征函数"
      content: |
        φ_X(t) = E[e^{itX}]

        完全确定分布（唯一性定理）

  # ===== 例子层 =====
  examples:
    discrete:
      - name: "伯努利分布"
        pmf: "P(X=1)=p, P(X=0)=1-p"
        parameters: "p ∈ [0,1]"
        applications: "单次试验成功/失败"

      - name: "二项分布"
        pmf: "P(X=k) = C(n,k) p^k (1-p)^{n-k}"
        parameters: "n ∈ ℕ, p ∈ [0,1]"
        applications: "n次独立试验的成功次数"

      - name: "泊松分布"
        pmf: "P(X=k) = λ^k e^{-λ}/k!"
        parameters: "λ > 0"
        applications: "稀有事件计数"

    continuous:
      - name: "均匀分布"
        pdf: "f(x) = 1/(b-a) 在 [a,b]"
        parameters: "a < b"
        applications: "等概率选择"

      - name: "正态分布"
        pdf: "f(x) = (2πσ²)^{-1/2} exp(-(x-μ)²/2σ²)"
        parameters: "μ ∈ ℝ, σ > 0"
        applications: "中心极限定理，误差分布"

      - name: "指数分布"
        pdf: "f(x) = λe^{-λx}, x ≥ 0"
        parameters: "λ > 0"
        applications: "等待时间，寿命"

  # ===== 关系层 =====
  relations:
    requires:
      - id: "random-variable"
        description: "分布是随机变量的属性"
      - id: "probability-space"
        description: "定义在概率空间上"
      - id: "measure"
        description: "分布是概率测度"

    generalizes:
      - id: "empirical-distribution"
        description: "经验分布"
      - id: "marginal-distribution"
        description: "边际分布"

    specialized_by:
      - id: "discrete-distribution"
        description: "离散分布"
      - id: "continuous-distribution"
        description: "连续分布"
      - id: "mixed-distribution"
        description: "混合分布"
      - id: "parametric-distribution"
        description: "参数分布"
      - id: "nonparametric-distribution"
        description: "非参数分布"

    related_to:
      - id: "expectation"
        description: "期望由分布确定"
      - id: "variance"
        description: "方差由分布确定"
      - id: "characteristic-function"
        description: "特征函数唯一确定分布"
      - id: "convergence-in-distribution"
        description: "依分布收敛"

  # ===== 定理层 =====
  key_theorems:
    - id: "distribution-uniqueness"
      statement: "CDF/PMF/PDF唯一确定分布"
      importance: 5

    - id: "characteristic-function-uniqueness"
      statement: "特征函数唯一确定分布"
      importance: 5

    - id: "convergence-in-distribution"
      statement: "X_n → X 当且仅当 F_{X_n} → F_X"
      importance: 5

    - id: "central-limit-theorem"
      statement: "标准化和分布收敛到正态"
      importance: 5

  # ===== 元数据层 =====
  metadata:
    difficulty: 2
    importance: 5

    prerequisites:
      - "random-variable"
      - "probability-space"
      - "measure"

    leads_to:
      - "expectation"
      - "variance"
      - "convergence-in-distribution"
      - "statistical-inference"

    history:
      first_appearance: "18-19世纪"
      context: "概率论发展"
      key_figures: ["Laplace", "Gauss", "Poisson"]

  # ===== Mathlib对齐 =====
  mathlib:
    path: "Mathlib.Probability.Distribution"
    name: "Distribution"
    coverage: "complete"
