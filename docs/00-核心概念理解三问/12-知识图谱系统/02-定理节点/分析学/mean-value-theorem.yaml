# mean-value-theorem.yaml - 中值定理知识图谱节点
# FormalMath Knowledge Graph - Theorem Node
# Created: 2025-12-01

theorem:
  id: "mean-value-theorem"
  name:
    zh: "拉格朗日中值定理"
    en: "Mean Value Theorem"
  msc_codes: ["26A24"]
  
  # ===== 陈述层 =====
  statement:
    formal: |
      设 f: [a,b] → ℝ 满足：
      1. f 在 [a,b] 上连续
      2. f 在 (a,b) 上可导
      
      则存在 c ∈ (a,b) 使得：
      f'(c) = [f(b) - f(a)] / (b - a)
      
    informal: |
      如果一辆车从A开到B，
      那么途中某一时刻的瞬时速度
      等于全程的平均速度。
      
      几何上：曲线上存在一点，
      切线平行于端点连线。
      
    lean: |
      -- Mathlib形式化
      theorem exists_deriv_eq_slope (hfc : ContinuousOn f (Set.Icc a b))
        (hfd : DifferentiableOn ℝ f (Set.Ioo a b)) (hab : a < b) :
        ∃ c ∈ Set.Ioo a b, deriv f c = (f b - f a) / (b - a)
        
  # ===== 证明层 =====
  proof:
    main_strategy: "构造辅助函数，应用Rolle定理"
    
    key_ideas:
      - "构造函数消除平均斜率"
      - "利用Rolle定理找零点"
      
    steps:
      - step: 1
        content: "构造辅助函数"
        formula: "g(x) = f(x) - f(a) - [(f(b)-f(a))/(b-a)](x-a)"
        
      - step: 2
        content: "验证 g(a) = g(b) = 0"
        
      - step: 3
        content: "由Rolle定理，∃c∈(a,b): g'(c) = 0"
        
      - step: 4
        content: "计算 g'(c) = f'(c) - (f(b)-f(a))/(b-a) = 0"
        
    proof_tree: |
      中值定理
          │
          ├── 构造辅助函数g
          │   └── g(x) = f(x) - 线性函数
          │
          ├── g满足Rolle条件
          │   ├── g连续于[a,b]
          │   ├── g可导于(a,b)
          │   └── g(a) = g(b) = 0
          │
          └── 应用Rolle定理
              └── ∃c: g'(c) = 0
              └── 即 f'(c) = 平均斜率
              
  # ===== 五种表征 =====
  representations:
    symbolic: |
      【符号表征】
      
      f'(c) = [f(b) - f(a)] / (b - a)
      
      等价形式：
      f(b) - f(a) = f'(c)(b - a)
      
      推广（Cauchy中值）：
      [f(b) - f(a)] / [g(b) - g(a)] = f'(c) / g'(c)
      
    geometric: |
      【几何表征】
      
           y│
            │      ╱  切线
            │     ╱•
            │    ╱ ╲
            │   •   ╲  割线
            │  ╱     •
            │ ╱
            └─────────────→ x
             a   c   b
             
      在c处切线平行于AB连线
      
    intuitive: |
      【直觉表征】
      
      行车类比：
      - 从A到B，平均速度60km/h
      - 途中必有某时刻瞬时速度恰好60km/h
      
      登山类比：
      - 爬坡1000米用了2小时
      - 某时刻爬升速度恰好500米/小时
      
    computational: |
      【计算表征】
      
      例：f(x) = x² 在 [1, 3] 上
      
      平均斜率 = (9 - 1)/(3 - 1) = 4
      f'(x) = 2x
      f'(c) = 4 ⟹ c = 2
      
      验证：c = 2 ∈ (1, 3) ✓
      
    categorical: |
      【范畴表征】
      
      从微分流形观点：
      - f定义了[a,b]到ℝ的光滑映射
      - 导数是切映射
      - 中值定理是切空间与差分的关系
      
  # ===== 应用层 =====
  applications:
    - domain: "不等式证明"
      description: "估计函数值的变化"
      example: "|sin(x) - sin(y)| ≤ |x - y|"
      
    - domain: "函数单调性"
      description: "f' > 0 ⟹ f 递增"
      
    - domain: "Taylor展开"
      description: "误差项的估计"
      
    - domain: "L'Hôpital法则"
      description: "证明的核心工具"
      
  # ===== 关系层 =====
  relations:
    uses_concepts:
      - id: "derivative"
        role: "核心概念"
      - id: "continuity"
        role: "条件"
        
    uses_theorems:
      - id: "rolle-theorem"
        role: "证明工具"
      - id: "extreme-value-theorem"
        role: "Rolle的前提"
        
    implies:
      - id: "monotonicity-criterion"
        description: "f' > 0 ⟹ f 递增"
      - id: "lipschitz-from-bounded-derivative"
        description: "|f'| ≤ M ⟹ f是Lipschitz"
        
    related_to:
      - id: "cauchy-mean-value"
        description: "更一般的形式"
        
  # ===== 元数据层 =====
  metadata:
    difficulty: 2
    importance: 5
    
    prerequisites:
      concepts: ["derivative", "continuity"]
      theorems: ["rolle-theorem"]
      
    year_proved: 1797
    provers: ["lagrange"]
    
  # ===== Mathlib对齐 =====
  mathlib:
    path: "Mathlib.Analysis.Calculus.MeanValue"
    main_theorem: "exists_deriv_eq_slope"
    coverage: "complete"
