# 概率论 / Probability Theory

## 目录 / Table of Contents

- [概率论 / Probability Theory](#概率论--probability-theory)
  - [目录 / Table of Contents](#目录--table-of-contents)
  - [12.1 基本概念 / Basic Concepts](#121-基本概念--basic-concepts)
    - [12.1.1 概率空间 / Probability Space](#1211-概率空间--probability-space)
    - [12.1.2 独立性 / Independence](#1212-独立性--independence)
    - [12.1.3 贝叶斯定理 / Bayes' Theorem](#1213-贝叶斯定理--bayes-theorem)
  - [12.2 随机变量 / Random Variables](#122-随机变量--random-variables)
    - [12.2.1 随机变量定义 / Definition of Random Variables](#1221-随机变量定义--definition-of-random-variables)
    - [实例表征 / Instance Representation](#实例表征--instance-representation)
      - [实例1: 概率空间实例 / Probability Space Examples](#实例1-概率空间实例--probability-space-examples)
      - [实例2: 条件概率实例 / Conditional Probability Examples](#实例2-条件概率实例--conditional-probability-examples)
      - [实例3: 独立性实例 / Independence Examples](#实例3-独立性实例--independence-examples)
      - [实例4: 贝叶斯定理应用实例 / Bayes' Theorem Application Examples](#实例4-贝叶斯定理应用实例--bayes-theorem-application-examples)
    - [12.2.2 离散随机变量 / Discrete Random Variables](#1222-离散随机变量--discrete-random-variables)
    - [12.2.3 连续随机变量 / Continuous Random Variables](#1223-连续随机变量--continuous-random-variables)
  - [12.3 概率分布 / Probability Distributions](#123-概率分布--probability-distributions)
    - [12.3.1 离散分布 / Discrete Distributions](#1231-离散分布--discrete-distributions)
      - [12.3.1.1 伯努利分布 / Bernoulli Distribution](#12311-伯努利分布--bernoulli-distribution)
      - [12.3.1.2 二项分布 / Binomial Distribution](#12312-二项分布--binomial-distribution)
      - [12.3.1.3 泊松分布 / Poisson Distribution](#12313-泊松分布--poisson-distribution)
    - [12.3.2 连续分布 / Continuous Distributions](#1232-连续分布--continuous-distributions)
      - [12.3.2.1 均匀分布 / Uniform Distribution](#12321-均匀分布--uniform-distribution)
      - [12.3.2.2 正态分布 / Normal Distribution](#12322-正态分布--normal-distribution)
      - [12.3.2.3 指数分布 / Exponential Distribution](#12323-指数分布--exponential-distribution)
  - [12.4 期望与方差 / Expectation and Variance](#124-期望与方差--expectation-and-variance)
    - [12.4.1 期望 / Expectation](#1241-期望--expectation)
    - [12.4.2 方差 / Variance](#1242-方差--variance)
    - [12.4.3 协方差 / Covariance](#1243-协方差--covariance)
  - [12.5 大数定律 / Law of Large Numbers](#125-大数定律--law-of-large-numbers)
    - [12.5.1 弱大数定律 / Weak Law of Large Numbers](#1251-弱大数定律--weak-law-of-large-numbers)
    - [12.5.2 强大数定律 / Strong Law of Large Numbers](#1252-强大数定律--strong-law-of-large-numbers)
  - [12.6 中心极限定理 / Central Limit Theorem](#126-中心极限定理--central-limit-theorem)
    - [12.6.1 中心极限定理 / Central Limit Theorem](#1261-中心极限定理--central-limit-theorem)
    - [12.6.2 应用 / Applications](#1262-应用--applications)
  - [12.7 随机过程 / Stochastic Processes](#127-随机过程--stochastic-processes)
    - [12.7.1 随机过程定义 / Definition of Stochastic Processes](#1271-随机过程定义--definition-of-stochastic-processes)
    - [12.7.2 随机游走 / Random Walk](#1272-随机游走--random-walk)
  - [12.8 马尔可夫链 / Markov Chains](#128-马尔可夫链--markov-chains)
    - [12.8.1 马尔可夫性质 / Markov Property](#1281-马尔可夫性质--markov-property)
    - [12.8.2 转移概率 / Transition Probabilities](#1282-转移概率--transition-probabilities)
    - [12.8.3 平稳分布 / Stationary Distribution](#1283-平稳分布--stationary-distribution)
  - [12.9 形式化实现 / Formal Implementation](#129-形式化实现--formal-implementation)
    - [12.9.1 Lean 4 实现](#1291-lean-4-实现)
    - [12.9.2 Haskell 实现](#1292-haskell-实现)
    - [12.9.3 Rust 实现](#1293-rust-实现)
  - [12.8 应用案例 / Application Cases](#128-应用案例--application-cases)
    - [12.8.1 金融风险管理 / Financial Risk Management](#1281-金融风险管理--financial-risk-management)
      - [投资组合优化 / Portfolio Optimization](#投资组合优化--portfolio-optimization)
      - [期权定价 / Option Pricing](#期权定价--option-pricing)
    - [12.8.2 医学诊断与治疗 / Medical Diagnosis and Treatment](#1282-医学诊断与治疗--medical-diagnosis-and-treatment)
      - [疾病诊断 / Disease Diagnosis](#疾病诊断--disease-diagnosis)
      - [药物临床试验 / Drug Clinical Trials](#药物临床试验--drug-clinical-trials)
    - [12.8.3 工程质量控制 / Engineering Quality Control](#1283-工程质量控制--engineering-quality-control)
      - [制造过程控制 / Manufacturing Process Control](#制造过程控制--manufacturing-process-control)
      - [可靠性工程 / Reliability Engineering](#可靠性工程--reliability-engineering)
    - [12.8.4 人工智能与机器学习 / Artificial Intelligence and Machine Learning](#1284-人工智能与机器学习--artificial-intelligence-and-machine-learning)
      - [自然语言处理 / Natural Language Processing](#自然语言处理--natural-language-processing)
      - [计算机视觉 / Computer Vision](#计算机视觉--computer-vision)
    - [12.8.5 环境科学与气候预测 / Environmental Science and Climate Prediction](#1285-环境科学与气候预测--environmental-science-and-climate-prediction)
      - [气候建模 / Climate Modeling](#气候建模--climate-modeling)
      - [污染扩散 / Pollution Dispersion](#污染扩散--pollution-dispersion)
  - [总结 / Summary](#总结--summary)
    - [关键要点 / Key Points](#关键要点--key-points)
    - [知识关联 / Knowledge Connections](#知识关联--knowledge-connections)
    - [进一步学习 / Further Learning](#进一步学习--further-learning)

---

## 12.1 基本概念 / Basic Concepts

### 12.1.1 概率空间 / Probability Space

**定义 1.1.1** (概率空间 / Probability Space)
概率空间是一个三元组 $(\Omega, \mathcal{F}, P)$，其中：

- $\Omega$ 是样本空间 (Sample Space)
- $\mathcal{F}$ 是事件域 (Event Space)，是 $\Omega$ 的子集的 $\sigma$-代数
- $P$ 是概率测度 (Probability Measure)，满足：
  - $P(\Omega) = 1$
  - $P(A) \geq 0$ 对所有 $A \in \mathcal{F}$
  - 对可数多个互不相交的事件 $A_1, A_2, \ldots$，有 $P(\bigcup_{i=1}^{\infty} A_i) = \sum_{i=1}^{\infty} P(A_i)$

**定义 1.1.2** (事件 / Event)
事件是样本空间 $\Omega$ 的子集，属于事件域 $\mathcal{F}$。

**定义 1.1.3** (条件概率 / Conditional Probability)
设 $A, B \in \mathcal{F}$ 且 $P(B) > 0$，则 $A$ 在 $B$ 条件下的条件概率为：
$$P(A|B) = \frac{P(A \cap B)}{P(B)}$$

### 12.1.2 独立性 / Independence

**定义 1.2.1** (事件独立性 / Independence of Events)
事件 $A$ 和 $B$ 称为独立的，如果：
$$P(A \cap B) = P(A)P(B)$$

**定义 1.2.2** (条件独立性 / Conditional Independence)
事件 $A$ 和 $B$ 在事件 $C$ 条件下称为条件独立的，如果：
$$P(A \cap B|C) = P(A|C)P(B|C)$$

### 12.1.3 贝叶斯定理 / Bayes' Theorem

**定理 1.3.1** (贝叶斯定理 / Bayes' Theorem)
设 $A_1, A_2, \ldots, A_n$ 是样本空间的一个划分，且 $P(A_i) > 0$ 对所有 $i$，$B$ 是任意事件且 $P(B) > 0$，则：
$$P(A_i|B) = \frac{P(B|A_i)P(A_i)}{\sum_{j=1}^{n} P(B|A_j)P(A_j)}$$

## 12.2 随机变量 / Random Variables

### 12.2.1 随机变量定义 / Definition of Random Variables

**定义 2.1.1** (随机变量 / Random Variable)
随机变量是从概率空间 $(\Omega, \mathcal{F}, P)$ 到实数集 $\mathbb{R}$ 的可测函数 $X: \Omega \to \mathbb{R}$。

**定义 2.1.2** (分布函数 / Distribution Function)
随机变量 $X$ 的分布函数定义为：
$$F_X(x) = P(X \leq x)$$

**性质**:

### 实例表征 / Instance Representation

#### 实例1: 概率空间实例 / Probability Space Examples

**概念**: 概率空间的定义和构造
**实例**:

- **抛硬币实验**:
  - 样本空间: $\Omega = \{H, T\}$ (正面, 反面)
  - 事件域: $\mathcal{F} = \{\emptyset, \{H\}, \{T\}, \{H, T\}\}$
  - 概率测度: $P(H) = 0.5$, $P(T) = 0.5$
- **掷骰子实验**:
  - 样本空间: $\Omega = \{1, 2, 3, 4, 5, 6\}$
  - 事件域: $\mathcal{F} = 2^\Omega$ (所有子集)
  - 概率测度: $P(i) = \frac{1}{6}$ 对所有 $i \in \Omega$
- **连续概率空间**:
  - 样本空间: $\Omega = [0, 1]$ (单位区间)
  - 事件域: $\mathcal{F} = \mathcal{B}([0, 1])$ (Borel集)
  - 概率测度: $P([a, b]) = b - a$ (均匀分布)

#### 实例2: 条件概率实例 / Conditional Probability Examples

**概念**: 条件概率的计算和应用
**实例**:

- **疾病检测**:
  - 设疾病患病率为 $P(D) = 0.01$
  - 检测准确率为 $P(T|D) = 0.95$, $P(T|\bar{D}) = 0.05$
  - 求检测阳性时患病的概率 $P(D|T)$
  - 解: $P(D|T) = \frac{P(T|D)P(D)}{P(T|D)P(D) + P(T|\bar{D})P(\bar{D})} = \frac{0.95 \times 0.01}{0.95 \times 0.01 + 0.05 \times 0.99} \approx 0.16$
- **产品质量检验**:
  - 产品合格率 $P(G) = 0.9$
  - 检验准确率 $P(T|G) = 0.98$, $P(T|\bar{G}) = 0.02$
  - 求检验通过时产品合格的概率 $P(G|T)$

#### 实例3: 独立性实例 / Independence Examples

**概念**: 事件独立性的判断和应用
**实例**:

- **独立事件**:
  - 抛两次硬币: $A = \{第一次正面\}$, $B = \{第二次正面\}$
  - $P(A) = 0.5$, $P(B) = 0.5$, $P(A \cap B) = 0.25 = P(A)P(B)$ ✓
- **非独立事件**:
  - 从52张牌中抽两张: $A = \{第一张是红心\}$, $B = \{第二张是红心\}$
  - $P(A) = \frac{13}{52} = \frac{1}{4}$, $P(B|A) = \frac{12}{51} \neq \frac{13}{52}$ ✗

#### 实例4: 贝叶斯定理应用实例 / Bayes' Theorem Application Examples

**概念**: 贝叶斯定理的实际应用
**实例**:

- **垃圾邮件过滤**:
  - 垃圾邮件比例: $P(Spam) = 0.3$
  - 正常邮件比例: $P(Ham) = 0.7$
  - 垃圾邮件包含"免费"的概率: $P(Free|Spam) = 0.8$
  - 正常邮件包含"免费"的概率: $P(Free|Ham) = 0.1$
  - 求包含"免费"的邮件是垃圾邮件的概率:
    - $P(Spam|Free) = \frac{P(Free|Spam)P(Spam)}{P(Free|Spam)P(Spam) + P(Free|Ham)P(Ham)} = \frac{0.8 \times 0.3}{0.8 \times 0.3 + 0.1 \times 0.7} \approx 0.77$

---

- $F_X$ 是非减函数
- $\lim_{x \to -\infty} F_X(x) = 0$
- $\lim_{x \to \infty} F_X(x) = 1$
- $F_X$ 是右连续的

### 12.2.2 离散随机变量 / Discrete Random Variables

**定义 2.2.1** (离散随机变量 / Discrete Random Variable)
随机变量 $X$ 称为离散的，如果它只取可数多个值。

**定义 2.2.2** (概率质量函数 / Probability Mass Function)
离散随机变量 $X$ 的概率质量函数定义为：
$$p_X(x) = P(X = x)$$

**性质**:

- $p_X(x) \geq 0$ 对所有 $x$
- $\sum_{x} p_X(x) = 1$

### 12.2.3 连续随机变量 / Continuous Random Variables

**定义 2.3.1** (连续随机变量 / Continuous Random Variable)
随机变量 $X$ 称为连续的，如果存在非负函数 $f_X$ 使得：
$$F_X(x) = \int_{-\infty}^{x} f_X(t) dt$$

**定义 2.3.2** (概率密度函数 / Probability Density Function)
连续随机变量 $X$ 的概率密度函数 $f_X$ 满足：
$$f_X(x) = \frac{d}{dx} F_X(x)$$

**性质**:

- $f_X(x) \geq 0$ 对所有 $x$
- $\int_{-\infty}^{\infty} f_X(x) dx = 1$

## 12.3 概率分布 / Probability Distributions

### 12.3.1 离散分布 / Discrete Distributions

#### 12.3.1.1 伯努利分布 / Bernoulli Distribution

**定义 3.1.1** (伯努利分布 / Bernoulli Distribution)
随机变量 $X$ 服从参数为 $p$ 的伯努利分布，记作 $X \sim \text{Bernoulli}(p)$，如果：
$$P(X = 1) = p, \quad P(X = 0) = 1-p$$

**性质**:

- $E[X] = p$
- $\text{Var}(X) = p(1-p)$

#### 12.3.1.2 二项分布 / Binomial Distribution

**定义 3.1.2** (二项分布 / Binomial Distribution)
随机变量 $X$ 服从参数为 $n$ 和 $p$ 的二项分布，记作 $X \sim \text{Binomial}(n,p)$，如果：
$$P(X = k) = \binom{n}{k} p^k (1-p)^{n-k}, \quad k = 0,1,\ldots,n$$

**性质**:

- $E[X] = np$
- $\text{Var}(X) = np(1-p)$

#### 12.3.1.3 泊松分布 / Poisson Distribution

**定义 3.1.3** (泊松分布 / Poisson Distribution)
随机变量 $X$ 服从参数为 $\lambda$ 的泊松分布，记作 $X \sim \text{Poisson}(\lambda)$，如果：
$$P(X = k) = \frac{\lambda^k e^{-\lambda}}{k!}, \quad k = 0,1,2,\ldots$$

**性质**:

- $E[X] = \lambda$
- $\text{Var}(X) = \lambda$

### 12.3.2 连续分布 / Continuous Distributions

#### 12.3.2.1 均匀分布 / Uniform Distribution

**定义 3.2.1** (均匀分布 / Uniform Distribution)
随机变量 $X$ 服从区间 $[a,b]$ 上的均匀分布，记作 $X \sim \text{Uniform}(a,b)$，如果：
$$
f_X(x) = \begin{cases}
\frac{1}{b-a}, & \text{if } a \leq x \leq b \\
0, & \text{otherwise}
\end{cases}
$$

**性质**:

- $E[X] = \frac{a+b}{2}$
- $\text{Var}(X) = \frac{(b-a)^2}{12}$

#### 12.3.2.2 正态分布 / Normal Distribution

**定义 3.2.2** (正态分布 / Normal Distribution)
随机变量 $X$ 服从参数为 $\mu$ 和 $\sigma^2$ 的正态分布，记作 $X \sim \text{Normal}(\mu,\sigma^2)$，如果：
$$f_X(x) = \frac{1}{\sqrt{2\pi\sigma^2}} e^{-\frac{(x-\mu)^2}{2\sigma^2}}$$

**性质**:

- $E[X] = \mu$
- $\text{Var}(X) = \sigma^2$
- 线性变换：如果 $Y = aX + b$，则 $Y \sim \text{Normal}(a\mu + b, a^2\sigma^2)$

#### 12.3.2.3 指数分布 / Exponential Distribution

**定义 3.2.3** (指数分布 / Exponential Distribution)
随机变量 $X$ 服从参数为 $\lambda$ 的指数分布，记作 $X \sim \text{Exponential}(\lambda)$，如果：
$$
f_X(x) = \begin{cases}
\lambda e^{-\lambda x}, & \text{if } x \geq 0 \\
0, & \text{otherwise}
\end{cases}
$$

**性质**:

- $E[X] = \frac{1}{\lambda}$
- $\text{Var}(X) = \frac{1}{\lambda^2}$
- 无记忆性：$P(X > s+t|X > s) = P(X > t)$

## 12.4 期望与方差 / Expectation and Variance

### 12.4.1 期望 / Expectation

**定义 4.1.1** (期望 / Expectation)
随机变量 $X$ 的期望定义为：
$$
E[X] = \begin{cases}
\sum_{x} x p_X(x), & \text{if } X \text{ is discrete} \\
\int_{-\infty}^{\infty} x f_X(x) dx, & \text{if } X \text{ is continuous}
\end{cases}
$$

**性质**:

- 线性性：$E[aX + b] = aE[X] + b$
- 可加性：$E[X + Y] = E[X] + E[Y]$
- 独立性：如果 $X$ 和 $Y$ 独立，则 $E[XY] = E[X]E[Y]$

### 12.4.2 方差 / Variance

**定义 4.2.1** (方差 / Variance)
随机变量 $X$ 的方差定义为：
$$\text{Var}(X) = E[(X - E[X])^2] = E[X^2] - (E[X])^2$$

**性质**:

- $\text{Var}(X) \geq 0$
- $\text{Var}(aX + b) = a^2\text{Var}(X)$
- 如果 $X$ 和 $Y$ 独立，则 $\text{Var}(X + Y) = \text{Var}(X) + \text{Var}(Y)$

### 12.4.3 协方差 / Covariance

**定义 4.3.1** (协方差 / Covariance)
随机变量 $X$ 和 $Y$ 的协方差定义为：
$$\text{Cov}(X,Y) = E[(X - E[X])(Y - E[Y])] = E[XY] - E[X]E[Y]$$

**性质**:

- $\text{Cov}(X,X) = \text{Var}(X)$
- $\text{Cov}(X,Y) = \text{Cov}(Y,X)$
- $\text{Cov}(aX + b, cY + d) = ac\text{Cov}(X,Y)$

## 12.5 大数定律 / Law of Large Numbers

### 12.5.1 弱大数定律 / Weak Law of Large Numbers

**定理 5.1.1** (弱大数定律 / Weak Law of Large Numbers)
设 $X_1, X_2, \ldots$ 是独立同分布的随机变量序列，且 $E[X_i] = \mu$，$\text{Var}(X_i) = \sigma^2 < \infty$，则：
$$\frac{X_1 + X_2 + \cdots + X_n}{n} \xrightarrow{P} \mu$$

其中 $\xrightarrow{P}$ 表示依概率收敛。

### 12.5.2 强大数定律 / Strong Law of Large Numbers

**定理 5.2.1** (强大数定律 / Strong Law of Large Numbers)
设 $X_1, X_2, \ldots$ 是独立同分布的随机变量序列，且 $E[X_i] = \mu$，则：
$$\frac{X_1 + X_2 + \cdots + X_n}{n} \xrightarrow{a.s.} \mu$$

其中 $\xrightarrow{a.s.}$ 表示几乎必然收敛。

## 12.6 中心极限定理 / Central Limit Theorem

### 12.6.1 中心极限定理 / Central Limit Theorem

**定理 6.1.1** (中心极限定理 / Central Limit Theorem)
设 $X_1, X_2, \ldots$ 是独立同分布的随机变量序列，且 $E[X_i] = \mu$，$\text{Var}(X_i) = \sigma^2 < \infty$，则：
$$\frac{X_1 + X_2 + \cdots + X_n - n\mu}{\sqrt{n}\sigma} \xrightarrow{d} Z$$

其中 $Z \sim \text{Normal}(0,1)$，$\xrightarrow{d}$ 表示依分布收敛。

### 12.6.2 应用 / Applications

**应用 6.2.1** (正态近似 / Normal Approximation)
对于大样本，可以用正态分布近似二项分布：
$$\text{Binomial}(n,p) \approx \text{Normal}(np, np(1-p))$$

**应用 6.2.2** (置信区间 / Confidence Intervals)
基于中心极限定理可以构造置信区间：
$$P\left(\bar{X} - z_{\alpha/2}\frac{\sigma}{\sqrt{n}} \leq \mu \leq \bar{X} + z_{\alpha/2}\frac{\sigma}{\sqrt{n}}\right) = 1-\alpha$$

## 12.7 随机过程 / Stochastic Processes

### 12.7.1 随机过程定义 / Definition of Stochastic Processes

**定义 7.1.1** (随机过程 / Stochastic Process)
随机过程是参数集 $T$ 上的随机变量族 $\{X_t\}_{t \in T}$。

**分类**:

- 离散时间过程：$T = \mathbb{N}$ 或 $T = \mathbb{Z}$
- 连续时间过程：$T = [0,\infty)$ 或 $T = \mathbb{R}$

### 12.7.2 随机游走 / Random Walk

**定义 7.2.1** (简单随机游走 / Simple Random Walk)
简单随机游走是随机过程 $\{S_n\}_{n=0}^{\infty}$，其中：
$$S_0 = 0, \quad S_n = \sum_{i=1}^{n} X_i$$
其中 $X_i$ 是独立同分布的随机变量，$P(X_i = 1) = p$，$P(X_i = -1) = 1-p$。

**性质**:

- $E[S_n] = n(2p-1)$
- $\text{Var}(S_n) = 4np(1-p)$

## 12.8 马尔可夫链 / Markov Chains

### 12.8.1 马尔可夫性质 / Markov Property

**定义 8.1.1** (马尔可夫链 / Markov Chain)
随机过程 $\{X_n\}_{n=0}^{\infty}$ 称为马尔可夫链，如果：
$$P(X_{n+1} = j|X_n = i, X_{n-1} = i_{n-1}, \ldots, X_0 = i_0) = P(X_{n+1} = j|X_n = i)$$

### 12.8.2 转移概率 / Transition Probabilities

**定义 8.2.1** (转移概率矩阵 / Transition Probability Matrix)
马尔可夫链的转移概率矩阵 $P = (p_{ij})$ 定义为：
$$p_{ij} = P(X_{n+1} = j|X_n = i)$$

**性质**:

- $p_{ij} \geq 0$ 对所有 $i,j$
- $\sum_{j} p_{ij} = 1$ 对所有 $i$

### 12.8.3 平稳分布 / Stationary Distribution

**定义 8.3.1** (平稳分布 / Stationary Distribution)
概率分布 $\pi = (\pi_i)$ 称为平稳分布，如果：
$$\pi_j = \sum_{i} \pi_i p_{ij}$$

**性质**:

- 如果马尔可夫链是有限且不可约的，则平稳分布存在且唯一
- 平稳分布满足 $\pi P = \pi$

## 12.9 形式化实现 / Formal Implementation

### 12.9.1 Lean 4 实现

```lean
-- 概率空间
structure ProbabilitySpace where
  sample_space : Type
  event_space : Set (Set sample_space)
  probability_measure : event_space → ℝ
  probability_axioms :
    probability_measure ∅ = 0 ∧
    probability_measure sample_space = 1 ∧
    ∀ A B, A ∈ event_space → B ∈ event_space →
    A ∩ B = ∅ → probability_measure (A ∪ B) = probability_measure A + probability_measure B

-- 随机变量
structure RandomVariable (Ω : ProbabilitySpace) where
  function : Ω.sample_space → ℝ
  measurability : ∀ B : Set ℝ, B ∈ borel_sets →
    {ω : Ω.sample_space | function ω ∈ B} ∈ Ω.event_space

-- 期望
def expectation {Ω : ProbabilitySpace} (X : RandomVariable Ω) : ℝ :=
  ∫ x, x * probability_density X x

-- 方差
def variance {Ω : ProbabilitySpace} (X : RandomVariable Ω) : ℝ :=
  expectation (X - expectation X)^2

-- 正态分布
structure NormalDistribution where
  mean : ℝ
  variance : ℝ
  probability_density : ℝ → ℝ := λ x,
    1 / sqrt (2 * π * variance) * exp (-(x - mean)^2 / (2 * variance))

-- 大数定律
theorem weak_law_of_large_numbers {Ω : ProbabilitySpace}
  (X : ℕ → RandomVariable Ω) (μ : ℝ) :
  (∀ n, expectation (X n) = μ) ∧
  (∀ n, variance (X n) ≤ σ²) →
  ∀ ε > 0,
  probability_measure {ω | |(∑ i in finset.range n, X i ω) / n - μ| ≥ ε} → 0
```

### 12.9.2 Haskell 实现

```haskell
-- 概率空间
data ProbabilitySpace a = ProbabilitySpace
  { sampleSpace :: [a]
  , eventSpace :: Set (Set a)
  , probabilityMeasure :: Set a -> Double
  }

-- 随机变量
newtype RandomVariable a = RandomVariable
  { randomFunction :: a -> Double
  }

-- 期望
expectation :: (Eq a, Ord a) => ProbabilitySpace a -> RandomVariable a -> Double
expectation ps rv = sum [x * probabilityMeasure ps (preimage rv x) | x <- values rv]

-- 方差
variance :: (Eq a, Ord a) => ProbabilitySpace a -> RandomVariable a -> Double
variance ps rv = expectation ps (rv - expectation ps rv)^2

-- 正态分布
data NormalDistribution = NormalDistribution
  { mean :: Double
  , variance :: Double
  }

probabilityDensity :: NormalDistribution -> Double -> Double
probabilityDensity nd x =
  (1 / sqrt (2 * pi * variance nd)) *
  exp (-(x - mean nd)^2 / (2 * variance nd))

-- 大数定律
weakLawOfLargeNumbers :: [RandomVariable a] -> Double -> Double -> Double -> Double
weakLawOfLargeNumbers rvs mu sigma epsilon =
  let n = length rvs
      sample_mean = sum (map randomFunction rvs) / fromIntegral n
  in if abs (sample_mean - mu) >= epsilon then 0 else 1
```

### 12.9.3 Rust 实现

```rust
// 概率空间
pub struct ProbabilitySpace<T> {
    pub sample_space: Vec<T>,
    pub event_space: HashSet<HashSet<T>>,
    pub probability_measure: Box<dyn Fn(&HashSet<T>) -> f64>,
}

// 随机变量
pub struct RandomVariable<T> {
    pub function: Box<dyn Fn(&T) -> f64>,
}

// 期望
pub fn expectation<T: Eq + Hash>(
    ps: &ProbabilitySpace<T>,
    rv: &RandomVariable<T>,
) -> f64 {
    ps.sample_space
        .iter()
        .map(|x| rv.function(x) * ps.probability_measure(&HashSet::from([x.clone()])))
        .sum()
}

// 方差
pub fn variance<T: Eq + Hash>(
    ps: &ProbabilitySpace<T>,
    rv: &RandomVariable<T>,
) -> f64 {
    let mean = expectation(ps, rv);
    expectation(
        ps,
        &RandomVariable {
            function: Box::new(|x| (rv.function(x) - mean).powi(2)),
        },
    )
}

// 正态分布
pub struct NormalDistribution {
    pub mean: f64,
    pub variance: f64,
}

impl NormalDistribution {
    pub fn probability_density(&self, x: f64) -> f64 {
        (1.0 / (2.0 * std::f64::consts::PI * self.variance).sqrt())
            * (-(x - self.mean).powi(2) / (2.0 * self.variance)).exp()
    }
}

// 大数定律
pub fn weak_law_of_large_numbers(
    rvs: &[RandomVariable<i32>],
    mu: f64,
    sigma: f64,
    epsilon: f64,
) -> f64 {
    let n = rvs.len() as f64;
    let sample_mean: f64 = rvs
        .iter()
        .map(|rv| rv.function(&0)) // 简化示例
        .sum::<f64>()
        / n;

    if (sample_mean - mu).abs() >= epsilon {
        0.0
    } else {
        1.0
    }
}
```

---

**相关链接**:

- [统计学](02-统计学.md)
- [随机过程](03-随机过程.md)
- [数理统计](04-数理统计.md)
- [时间序列分析](05-时间序列分析.md)
- [机器学习数学基础](06-机器学习数学基础.md)

---

## 12.8 应用案例 / Application Cases

### 12.8.1 金融风险管理 / Financial Risk Management

#### 投资组合优化 / Portfolio Optimization

**应用场景**: 现代投资组合理论中的风险-收益平衡
**数学模型**: 多变量正态分布与协方差矩阵
**具体实例**:

- **问题**: 给定 $n$ 种资产，每种资产的期望收益率 $\mu_i$ 和风险 $\sigma_i$，以及资产间的相关系数 $\rho_{ij}$
- **目标**: 找到最优权重 $w_i$ 使得在给定风险水平下最大化期望收益
- **概率模型**: 投资组合收益 $R_p = \sum_{i=1}^n w_i R_i$，其中 $R_i \sim N(\mu_i, \sigma_i^2)$
- **风险度量**: $VaR_\alpha = \mu_p - z_\alpha \sigma_p$，其中 $\alpha$ 是置信水平
- **实际应用**: 银行、基金公司、保险公司进行资产配置决策

#### 期权定价 / Option Pricing

**应用场景**: 金融衍生品定价与风险管理
**数学模型**: 几何布朗运动与Black-Scholes模型
**具体实例**:

- **问题**: 计算欧式看涨期权的公平价格
- **随机过程**: 股票价格 $S_t$ 服从几何布朗运动 $dS_t = \mu S_t dt + \sigma S_t dW_t$
- **定价公式**: $C = S_0 N(d_1) - Ke^{-rT} N(d_2)$，其中 $N(\cdot)$ 是标准正态分布函数
- **风险中性概率**: 在风险中性测度下，股票价格漂移率为无风险利率 $r$
- **实际应用**: 交易所、投资银行、对冲基金进行期权交易与风险管理

### 12.8.2 医学诊断与治疗 / Medical Diagnosis and Treatment

#### 疾病诊断 / Disease Diagnosis

**应用场景**: 基于症状和检查结果的疾病概率诊断
**数学模型**: 贝叶斯定理与条件概率
**具体实例**:

- **问题**: 患者出现症状 $S$，计算患疾病 $D$ 的后验概率
- **贝叶斯公式**: $P(D|S) = \frac{P(S|D)P(D)}{P(S)}$
- **先验概率**: $P(D)$ 基于人群流行病学数据
- **似然函数**: $P(S|D)$ 基于医学研究和临床经验
- **实际应用**: 医生进行诊断决策、医学影像分析、基因检测结果解读

#### 药物临床试验 / Drug Clinical Trials

**应用场景**: 新药安全性和有效性的统计评估
**数学模型**: 假设检验与置信区间
**具体实例**:

- **问题**: 比较新药与安慰剂的治疗效果
- **实验设计**: 随机双盲对照试验
- **统计检验**: $H_0: \mu_{drug} = \mu_{placebo}$ vs $H_1: \mu_{drug} > \mu_{placebo}$
- **效应大小**: Cohen's d = $\frac{\bar{x}_{drug} - \bar{x}_{placebo}}{s_{pooled}}$
- **实际应用**: 制药公司、监管机构、医院进行药物审批和临床应用决策

### 12.8.3 工程质量控制 / Engineering Quality Control

#### 制造过程控制 / Manufacturing Process Control

**应用场景**: 工业生产中的质量监控与改进
**数学模型**: 控制图与过程能力分析
**具体实例**:

- **问题**: 监控生产线产品质量的稳定性
- **控制图**: $\bar{X}$ 图和 $R$ 图，控制限为 $\bar{\bar{x}} \pm 3\frac{\bar{R}}{d_2\sqrt{n}}$
- **过程能力**: $C_p = \frac{USL - LSL}{6\sigma}$，$C_{pk} = \min\{\frac{USL - \mu}{3\sigma}, \frac{\mu - LSL}{3\sigma}\}$
- **异常检测**: 连续7点在一侧、连续7点上升/下降等模式识别
- **实际应用**: 汽车制造、电子产品生产、食品加工等行业的质量管理

#### 可靠性工程 / Reliability Engineering

**应用场景**: 系统寿命预测与维护策略优化
**数学模型**: 威布尔分布与指数分布
**具体实例**:

- **问题**: 预测机械设备的故障时间和制定预防性维护计划
- **寿命分布**: 设备寿命 $T$ 服从威布尔分布 $f(t) = \frac{\beta}{\eta}(\frac{t}{\eta})^{\beta-1}e^{-(\frac{t}{\eta})^\beta}$
- **可靠性函数**: $R(t) = P(T > t) = e^{-(\frac{t}{\eta})^\beta}$
- **失效率**: $\lambda(t) = \frac{f(t)}{R(t)} = \frac{\beta}{\eta}(\frac{t}{\eta})^{\beta-1}$
- **实际应用**: 航空航天、电力系统、核电站等关键设施的维护管理

### 12.8.4 人工智能与机器学习 / Artificial Intelligence and Machine Learning

#### 自然语言处理 / Natural Language Processing

**应用场景**: 文本分类、情感分析、机器翻译
**数学模型**: 朴素贝叶斯、隐马尔可夫模型
**具体实例**:

- **问题**: 对用户评论进行情感分析（正面/负面/中性）
- **特征提取**: 词频-逆文档频率（TF-IDF）向量化
- **分类模型**: 朴素贝叶斯分类器 $P(y|x) \propto P(y)\prod_{i=1}^n P(x_i|y)$
- **评估指标**: 准确率、精确率、召回率、F1分数
- **实际应用**: 社交媒体监控、产品评价分析、客户服务自动化

#### 计算机视觉 / Computer Vision

**应用场景**: 图像识别、目标检测、人脸识别
**数学模型**: 卷积神经网络与概率分布
**具体实例**:

- **问题**: 医学影像中的肿瘤检测
- **数据增强**: 通过旋转、缩放、噪声添加增加训练样本
- **概率输出**: 使用Softmax函数 $P(y_i|x) = \frac{e^{z_i}}{\sum_{j=1}^K e^{z_j}}$ 获得类别概率
- **不确定性量化**: 使用Monte Carlo Dropout估计预测不确定性
- **实际应用**: 医疗诊断辅助、自动驾驶、安防监控

### 12.8.5 环境科学与气候预测 / Environmental Science and Climate Prediction

#### 气候建模 / Climate Modeling

**应用场景**: 全球气候变化预测与风险评估
**数学模型**: 时间序列分析与随机过程
**具体实例**:

- **问题**: 预测未来50年全球平均温度变化
- **时间序列模型**: ARIMA模型 $\phi(B)(1-B)^d X_t = \theta(B)\epsilon_t$
- **蒙特卡洛模拟**: 生成多条可能的温度变化轨迹
- **风险评估**: 计算极端事件（如热浪、洪水）的发生概率
- **实际应用**: 政府政策制定、城市规划、农业规划

#### 污染扩散 / Pollution Dispersion

**应用场景**: 工业污染物的扩散预测与控制
**数学模型**: 扩散方程与随机游走
**具体实例**:

- **问题**: 预测化工厂泄漏事故中污染物的扩散范围
- **扩散方程**: $\frac{\partial C}{\partial t} = D\nabla^2 C - \mathbf{v}\cdot\nabla C + S$
- **随机游走**: 粒子在三维空间中的随机运动模拟
- **风险评估**: 计算不同距离和时间点的污染物浓度分布
- **实际应用**: 环境应急响应、工业安全规划、城市规划

---

**应用案例状态**: 涵盖金融、医学、工程、AI、环境等主要领域  
**案例质量**: 理论联系实际 + 数学模型清晰 + 应用价值明确  
**扩展方向**: 可继续添加更多行业和新兴技术应用案例

---

## 总结 / Summary

概率论作为数学的重要分支，为不确定性现象的研究提供了严格的数学基础。通过公理化方法建立的概率体系，为统计学、机器学习、金融学等众多领域提供了理论基础。

**Probability theory, as an important branch of mathematics, provides a rigorous mathematical foundation for the study of uncertain phenomena. The probabilistic system established through axiomatic methods provides theoretical foundations for statistics, machine learning, finance, and many other fields.**

### 关键要点 / Key Points

1. **公理化方法**: 通过科尔莫戈罗夫公理建立概率论的严格基础
2. **随机变量**: 将随机现象数学化的核心工具
3. **概率分布**: 描述随机变量行为的重要函数
4. **大数定律**: 连接概率论与统计学的桥梁
5. **中心极限定理**: 正态分布普遍性的理论基础
6. **实际应用**: 在金融、保险、科学实验等领域广泛应用

**1. Axiomatic Method**: Establishing the rigorous foundation of probability theory through Kolmogorov axioms
**2. Random Variables**: Core tools for mathematical modeling of random phenomena
**3. Probability Distributions**: Important functions describing random variable behavior
**4. Law of Large Numbers**: Bridge connecting probability theory and statistics
**5. Central Limit Theorem**: Theoretical foundation for the universality of normal distribution
**6. Practical Applications**: Wide applications in finance, insurance, scientific experiments, etc.

### 知识关联 / Knowledge Connections

- **与统计学的关系**: 概率论为统计学提供理论基础
- **与信息论的关系**: 熵的概念连接概率论与信息论
- **与测度论的关系**: 概率测度是测度论的特殊情况
- **与随机过程的关系**: 随机过程是概率论的动态扩展

### 进一步学习 / Further Learning

- **高级概率论**: 测度论基础、鞅论、随机分析
- **随机过程**: 马尔可夫过程、布朗运动、泊松过程
- **统计推断**: 参数估计、假设检验、贝叶斯统计
- **应用领域**: 金融数学、保险精算、生物统计

---

**参考文献 / References**:

1. Kolmogorov, A.N. "Foundations of the Theory of Probability". 1933.
2. Feller, W. "An Introduction to Probability Theory and Its Applications". 1950.
3. Billingsley, P. "Probability and Measure". 1979.
4. Durrett, R. "Probability: Theory and Examples". 1996.
5. Shiryaev, A.N. "Probability". 1996.

---
