# æ–‡ä»¶ç»“æ„ç»Ÿä¸€ä¼˜åŒ–è„šæœ¬
# ä¼˜åŒ–ç›®å½•é“¾æ¥æ ¼å¼ï¼Œä¸ºå…¶ä»–éƒ¨åˆ†æ·»åŠ ç¼–å·

$conceptFiles = Get-ChildItem "g:\_src\FormalMath\concept\æ ¸å¿ƒæ¦‚å¿µ\*.md" -Exclude "*ä¸‰è§†è§’ç‰ˆ*","*ç´¢å¼•*" | Sort-Object Name

foreach ($file in $conceptFiles) {
    Write-Host "ä¼˜åŒ–æ–‡ä»¶: $($file.Name)"
    
    $content = Get-Content $file.FullName -Raw -Encoding UTF8
    
    # ä¿®å¤ç›®å½•é“¾æ¥æ ¼å¼ï¼ˆMarkdowné”šç‚¹éœ€è¦å°å†™å’Œè¿å­—ç¬¦ï¼‰
    $content = $content -replace '\(#1-æ¦‚è¿°\)', '(#1-æ¦‚è¿°)'
    $content = $content -replace '\(#2-ä¸¥æ ¼å®šä¹‰\)', '(#2-ä¸¥æ ¼å®šä¹‰)'
    $content = $content -replace '\(#21-åŸºç¡€å®šä¹‰-l0\)', '(#21-åŸºç¡€å®šä¹‰-l0)'
    $content = $content -replace '\(#22-å½¢å¼åŒ–å®šä¹‰-l1\)', '(#22-å½¢å¼åŒ–å®šä¹‰-l1)'
    $content = $content -replace '\(#3-å†å²èƒŒæ™¯\)', '(#3-å†å²èƒŒæ™¯)'
    $content = $content -replace '\(#31-å‘å±•è„‰ç»œ\)', '(#31-å‘å±•è„‰ç»œ)'
    $content = $content -replace '\(#32-å…³é”®äººç‰©\)', '(#32-å…³é”®äººç‰©)'
    $content = $content -replace '\(#33-é‡è¦äº‹ä»¶\)', '(#33-é‡è¦äº‹ä»¶)'
    $content = $content -replace '\(#4-æ€§è´¨ä¸å®šç†\)', '(#4-æ€§è´¨ä¸å®šç†)'
    $content = $content -replace '\(#41-åŸºæœ¬æ€§è´¨-l1\)', '(#41-åŸºæœ¬æ€§è´¨-l1)'
    $content = $content -replace '\(#42-é‡è¦å®šç†-l2\)', '(#42-é‡è¦å®šç†-l2)'
    $content = $content -replace '\(#5-å½¢å¼åŒ–è¯æ˜\)', '(#5-å½¢å¼åŒ–è¯æ˜)'
    $content = $content -replace '\(#6-åº”ç”¨å®ä¾‹\)', '(#6-åº”ç”¨å®ä¾‹)'
    $content = $content -replace '\(#61-ç†è®ºåº”ç”¨\)', '(#61-ç†è®ºåº”ç”¨)'
    $content = $content -replace '\(#62-å®é™…åº”ç”¨\)', '(#62-å®é™…åº”ç”¨)'
    $content = $content -replace '\(#7-å…³è”æ¦‚å¿µ\)', '(#7-å…³è”æ¦‚å¿µ)'
    $content = $content -replace '\(#8-å‚è€ƒæ–‡çŒ®\)', '(#8-å‚è€ƒæ–‡çŒ®)'
    $content = $content -replace '\(#9-å…¶ä»–éƒ¨åˆ†\)', '(#9-å…¶ä»–éƒ¨åˆ†)'
    
    # ä¸ºå…¶ä»–éƒ¨åˆ†æ·»åŠ ç¼–å·ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
    $content = $content -replace '## ğŸ—ºï¸ æ€ç»´å¯¼å›¾', '## 9.1 ğŸ—ºï¸ æ€ç»´å¯¼å›¾'
    $content = $content -replace '## ğŸ“Š çŸ¥è¯†å¤šç»´å…³ç³»çŸ©é˜µ', '## 9.2 ğŸ“Š çŸ¥è¯†å¤šç»´å…³ç³»çŸ©é˜µ'
    $content = $content -replace '## ğŸ’­ å½¢è±¡åŒ–è§£é‡Šä¸è®ºè¯', '## 9.3 ğŸ’­ å½¢è±¡åŒ–è§£é‡Šä¸è®ºè¯'
    $content = $content -replace '## ğŸ“ å­¦ä¹ è·¯å¾„', '## 9.4 ğŸ“ å­¦ä¹ è·¯å¾„'
    $content = $content -replace '## ğŸ“š ä¹ é¢˜åº“', '## 9.5 ğŸ“š ä¹ é¢˜åº“'
    $content = $content -replace '## ğŸ§  è®¤çŸ¥ç»´åº¦è¡¨å¾', '## 9.6 ğŸ§  è®¤çŸ¥ç»´åº¦è¡¨å¾'
    $content = $content -replace '## ğŸ§© ç†æ€§ç»´åº¦è¡¨å¾', '## 9.7 ğŸ§© ç†æ€§ç»´åº¦è¡¨å¾'
    $content = $content -replace '## ğŸ§¬ ç»¼åˆæ•´åˆè¡¨å¾', '## 9.8 ğŸ§¬ ç»¼åˆæ•´åˆè¡¨å¾'
    
    # æ›´æ–°ç›®å½•ä¸­çš„å…¶ä»–éƒ¨åˆ†é“¾æ¥
    if ($content -match '9\. \[å…¶ä»–éƒ¨åˆ†\]') {
        $content = $content -replace '9\. \[å…¶ä»–éƒ¨åˆ†\]\(#9-å…¶ä»–éƒ¨åˆ†\)', "9. [å…¶ä»–éƒ¨åˆ†](#9-å…¶ä»–éƒ¨åˆ†)`n   - 9.1 [æ€ç»´å¯¼å›¾](#91-æ€ç»´å¯¼å›¾)ï¼ˆå¦‚æœæœ‰ï¼‰`n   - 9.2 [çŸ¥è¯†å¤šç»´å…³ç³»çŸ©é˜µ](#92-çŸ¥è¯†å¤šç»´å…³ç³»çŸ©é˜µ)ï¼ˆå¦‚æœæœ‰ï¼‰`n   - 9.3 [å½¢è±¡åŒ–è§£é‡Šä¸è®ºè¯](#93-å½¢è±¡åŒ–è§£é‡Šä¸è®ºè¯)ï¼ˆå¦‚æœæœ‰ï¼‰`n   - 9.4 [å­¦ä¹ è·¯å¾„](#94-å­¦ä¹ è·¯å¾„)ï¼ˆå¦‚æœæœ‰ï¼‰`n   - 9.5 [ä¹ é¢˜åº“](#95-ä¹ é¢˜åº“)ï¼ˆå¦‚æœæœ‰ï¼‰`n   - 9.6 [è®¤çŸ¥ç»´åº¦è¡¨å¾](#96-è®¤çŸ¥ç»´åº¦è¡¨å¾)ï¼ˆå¦‚æœæœ‰ï¼‰`n   - 9.7 [ç†æ€§ç»´åº¦è¡¨å¾](#97-ç†æ€§ç»´åº¦è¡¨å¾)ï¼ˆå¦‚æœæœ‰ï¼‰`n   - 9.8 [ç»¼åˆæ•´åˆè¡¨å¾](#98-ç»¼åˆæ•´åˆè¡¨å¾)ï¼ˆå¦‚æœæœ‰ï¼‰"
    }
    
    # ä¿å­˜æ–‡ä»¶
    Set-Content -Path $file.FullName -Value $content -Encoding UTF8 -NoNewline
    
    Write-Host "å®Œæˆ: $($file.Name)"
}

Write-Host "`næ‰€æœ‰æ–‡ä»¶ä¼˜åŒ–å®Œæˆï¼"
