# FormalMath项目跨分支链接系统设计文档

**文档编号**: DESIGN.004  
**创建日期**: 2026年2月2日  
**版本**: v1.0  
**状态**: 设计阶段  
**关联任务**: T1.3 建立跨分支链接系统设计

---

## 📋 文档概述

本文档设计FormalMath项目的跨分支概念链接系统，旨在建立200+概念链接、显式化代数-拓扑、分析-几何、代数-几何等跨分支关联，支持链接导航与可视化，并与《00-全面分析与改进方案-2026年2月2日.md》中的链接需求对齐。

**设计目标**:

- 建立200+跨分支概念链接
- 设计链接数据库与存储模型
- 设计链接导航与可视化
- 设计链接维护与扩展机制

**参考依据**:

- `00-全面分析与改进方案-2026年2月2日.md` 第三节「概念间链接缺失分析」
- 项目现有知识分支：01-基础数学、02-代数结构、03-分析学、04-几何学、05-拓扑学、06-数论等

---

## 🎯 一、链接需求分析（200+链接）

### 1.1 链接类型与优先级

| 链接类型 | 示例 | 目标数量 | 优先级 |
|----------|------|----------|--------|
| 代数-拓扑 | 群论 ↔ 拓扑群、李群 | 30+ | 🔴 P0 |
| 分析-几何 | 微分形式 ↔ 流形、Stokes定理 | 25+ | 🔴 P0 |
| 代数-几何 | 环论 ↔ 代数几何、概形 | 25+ | 🔴 P0 |
| 数论-几何 | 代数数论 ↔ 算术几何 | 20+ | 🟡 P1 |
| 逻辑-数学 | 形式化 ↔ 证明系统 | 15+ | 🟡 P1 |
| 分析-代数 | 泛函分析 ↔ 算子代数 | 20+ | 🟡 P1 |
| 其他跨分支 | 范畴论与各分支 | 65+ | P1/P2 |
| **合计** | - | **200+** | - |

### 1.2 链接关系语义

- **等价/同构**: 不同分支中对同一结构的等价刻画（如：拓扑群 ↔ 群+拓扑）
- **先修/依赖**: 概念A为概念B的先修（如：群 → 环 → 域）
- **应用/实例**: 概念A在分支B中的应用（如：微分形式在流形上的积分）
- **推广/特例**: 概念A是概念B的推广或特例（如：度量空间 → 拓扑空间）
- **交叉/桥梁**: 两个分支共用的桥梁概念（如：李群同时属于代数与几何）

### 1.3 文档内「相关概念」规范

- 每个概念文档需包含 **「相关概念」** 小节
- 每条相关概念需注明：目标文档路径、链接类型、简短说明（1 句）
- 双向链接：若 A→B 存在，则 B 的「相关概念」中应包含 A（或由系统自动维护）

---

## 🗄️ 二、链接数据库设计

### 2.1 核心实体

```
Link（链接）
├── id: 主键
├── source_doc: 源文档路径（相对项目根）
├── target_doc: 目标文档路径
├── link_type: 链接类型（等价/先修/应用/推广/交叉）
├── branch_pair: 分支对（如 "代数-拓扑"）
├── short_description: 一句话说明
├── priority: P0|P1|P2
├── created_at, updated_at
└── verified: 是否已人工/脚本校验

ConceptNode（概念节点，可选缓存）
├── doc_path: 文档路径
├── title: 概念标题
├── branch: 所属分支
├── msc_codes: MSC编码（可选，与T1.4联动）
└── out_links_count, in_links_count
```

### 2.2 存储方案

- **主数据**: 推荐使用结构化文件（如 `project/links/cross-branch-links.yaml` 或 JSON），便于版本管理与脚本处理。
- **派生索引**: 可由脚本生成「按分支对」「按文档」「按类型」的索引文件，供导航与可视化使用。
- **可选**: 若后续有 Web 服务，可导入关系型或图数据库。

### 2.3 链接表结构示例（YAML）

```yaml
version: "1.0"
updated: "2026-02-02"
links:
  - id: L001
    source: "02-代数结构/群论/01-群的基本概念.md"
    target: "05-拓扑学/02-代数拓扑/拓扑群.md"
    type: "交叉"
    branch_pair: "代数-拓扑"
    description: "拓扑群是群与拓扑结构的结合"
    priority: P0
    verified: false
  # ... 200+ 条
```

---

## 🧭 三、链接导航设计

### 3.1 文档内导航

- 在每个概念文档末尾（或规定位置）渲染 **「相关概念」** 列表：
  - 显示目标文档标题、路径、链接类型
  - 支持相对路径或站点内链接，便于本地/静态站浏览

### 3.2 全局导航能力

- **按分支对浏览**: 列出「代数-拓扑」「分析-几何」等所有链接，支持筛选与排序。
- **按文档浏览**: 给定文档路径，列出所有入链与出链。
- **按类型浏览**: 按「先修」「应用」「推广」等类型筛选。
- **最短路径（可选）**: 给定两个概念，展示概念链（需图结构与算法支持，可二期）。

### 3.3 与学习路径的整合

- 学习路径文档中可引用「跨分支链接」作为「延伸阅读」或「先修/后续」依据。
- 链接数据可用于生成「依赖图」「知识图谱」等可视化。

---

## 📐 四、链接可视化设计

### 4.1 概念级图（单文档）

- 以当前概念为圆心，展示其直接相关概念（一层出链+入链），节点为文档标题，边为链接类型。
- 工具：Mermaid 图（嵌入 Markdown）、或静态生成的 SVG/PNG。

### 4.2 分支级图

- 以分支为节点，边权为链接数量（或重要链接数量），展示分支间关联强度。
- 可用于项目总览与资源分配决策。

### 4.3 子图导出

- 支持按「分支对」或「主题」导出子图，用于讲义、报告或站点专题页。

### 4.4 技术选型建议

- 静态站点：Mermaid（文档内）+ 预生成图（脚本）。
- 交互式：D3.js / Cytoscape.js / 或现有图可视化库，数据从 `cross-branch-links` 与索引生成。

---

## 🔧 五、链接维护机制设计

### 5.1 创建与审核流程

1. **需求来源**: 改进方案清单、教学反馈、依赖关系分析。
2. **创建**: 在 `links` 表中新增记录，填写 source、target、type、description、priority。
3. **校验**: 脚本检查 source/target 路径是否存在、 Front Matter 是否含标题；人工抽查语义是否正确。
4. **标记**: 通过校验的链接可标记 `verified: true`。

### 5.2 脚本与工具

- **链接校验脚本**: 遍历 `links`，检查路径存在性、无重复 (source,target,type)、必填字段完整。
- **反向链接生成**: 由 A→B 自动在 B 的「相关概念」中插入 A（或生成索引供站点生成）。
- **统计脚本**: 按分支对、类型、优先级统计数量，输出报告，用于推进 200+ 目标。

### 5.3 与文档规范的统一

- 文档模板中规定「相关概念」小节格式（如 Markdown 列表 + 链接 + 类型标签）。
- 链接数据库与文档内「相关概念」可双写：优先以 `project/links/` 为权威数据源，文档内可由脚本或人工同步。

### 5.4 版本与迭代

- 链接文件纳入 Git，与文档同步迭代。
- 大范围增删改时更新 `updated` 与版本说明，便于回溯。

---

## ✅ 六、交付物清单（T1.3）

| 子任务 | 交付物 | 状态 |
|--------|--------|------|
| 链接需求分析（200+链接） | 本设计文档 §1 | ✅ |
| 链接数据库设计 | 本设计文档 §2 | ✅ |
| 链接导航设计 | 本设计文档 §3 | ✅ |
| 链接可视化设计 | 本设计文档 §4 | ✅ |
| 链接维护机制设计 | 本设计文档 §5 | ✅ |

---

## 🔗 七、与其他任务的关联

- **T2.4 跨分支链接建设**: 按本设计实现链接表、脚本、导航与可视化。
- **T1.4 MSC 编码标注**: 概念节点可带 MSC 编码，便于按数学分类筛选链接。
- **T3.2 课程依赖关系**: 依赖关系与「先修」类链接可共享数据或互相引用。

---

**文档版本**: v1.0  
**最后更新**: 2026年2月2日
