# 生日悖论 (Birthday Paradox)

**创建日期**: 2025年12月11日
**来源**: Math Cats: Scratching the Surface of Mathematical Concepts, Chapter 7
**主题编号**: CT.LOOK.01.12

---

## 📑 目录

- [生日悖论 (Birthday Paradox)](#生日悖论-birthday-paradox)
  - [📑 目录](#-目录)
  - [一、问题表述](#一问题表述)
    - [1.1 猫日问题](#11-猫日问题)
    - [1.2 反直觉的结果](#12-反直觉的结果)
  - [二、概率计算](#二概率计算)
    - [2.1 互补事件](#21-互补事件)
    - [2.2 逐步计算](#22-逐步计算)
    - [2.3 完整公式](#23-完整公式)
    - [2.4 具体计算](#24-具体计算)
  - [三、组合数学解释](#三组合数学解释)
    - [3.1 配对数量](#31-配对数量)
    - [3.2 配对计算](#32-配对计算)
    - [3.3 为什么23只猫就超过50%？](#33-为什么23只猫就超过50)
  - [四、应用与推广](#四应用与推广)
    - [4.1 实际应用](#41-实际应用)
    - [4.2 相关问题](#42-相关问题)
    - [4.3 历史背景](#43-历史背景)
    - [4.4 数学推广](#44-数学推广)

---

## 一、问题表述

### 1.1 猫日问题

**猫日问题 (Cat-Day Problem)**：如果有 $n$ 只随机选择的猫，至少两只猫共享同一个猫日的概率是多少？

**等价问题**：生日悖论（Birthday Paradox）

**假设**：

- 一年有365天（忽略闰年）
- 每只猫的猫日随机且独立
- 所有猫日等可能

### 1.2 反直觉的结果

**直觉**：需要366只猫才能保证有共享猫日。

**实际**：

- **23只猫**：共享猫日的概率 > 50%
- **32只猫**：共享猫日的概率 ≈ 75.33%
- **57只猫**：共享猫日的概率 > 99%

**为什么反直觉**：

- 我们考虑的是"天数"（365天）
- 但实际考虑的是"配对"（$\binom{n}{2}$ 对）
- 23只猫有253对，超过365的一半

---

## 二、概率计算

### 2.1 互补事件

**策略**：计算"没有共享猫日"的概率，然后用1减去。

**原因**：直接计算"至少一对共享猫日"比较复杂。

**公式**：

$$P(\text{至少一对共享猫日}) = 1 - P(\text{没有共享猫日})$$

### 2.2 逐步计算

**第一步**：第一只猫选择任意猫日，概率 = 1

**第二步**：第二只猫选择不同的猫日，概率 = $\frac{364}{365}$

**第三步**：第三只猫选择与前两只都不同的猫日，概率 = $\frac{363}{365}$

**第 $k$ 步**：第 $k$ 只猫选择与前 $k-1$ 只都不同的猫日，概率 = $\frac{365 - (k-1)}{365}$

### 2.3 完整公式

**$n$ 只猫没有共享猫日的概率**：

$$P(\text{没有共享猫日}) = \frac{365}{365} \times \frac{364}{365} \times \frac{363}{365} \times \cdots \times \frac{365 - (n-1)}{365}$$

$$= \prod_{i=0}^{n-1} \frac{365 - i}{365}$$

$$= \frac{365!}{(365-n)! \cdot 365^n}$$

**$n$ 只猫至少一对共享猫日的概率**：

$$P(\text{至少一对共享猫日}) = 1 - \prod_{i=0}^{n-1} \frac{365 - i}{365}$$

### 2.4 具体计算

**3只猫**：

$$P(\text{没有共享猫日}) = \frac{364}{365} \times \frac{363}{365} = \frac{132,132}{133,225} \approx 0.9917$$

$$P(\text{至少一对共享猫日}) = 1 - 0.9917 = 0.0083 = 0.83\%$$

**32只猫**：

$$P(\text{没有共享猫日}) = \prod_{i=0}^{31} \frac{365 - i}{365} \approx 0.2467$$

$$P(\text{至少一对共享猫日}) = 1 - 0.2467 = 0.7533 = 75.33\%$$

**23只猫**：

$$P(\text{至少一对共享猫日}) \approx 50.73\% > 50\%$$

---

## 三、组合数学解释

### 3.1 配对数量

**关键洞察**：我们实际关心的是"配对"，而不是"天数"。

**$n$ 只猫的配对数量**：

$$\binom{n}{2} = \frac{n(n-1)}{2}$$

**例子**：

- **3只猫**：$\binom{3}{2} = 3$ 对
- **23只猫**：$\binom{23}{2} = \frac{23 \times 22}{2} = 253$ 对
- **32只猫**：$\binom{32}{2} = \frac{32 \times 31}{2} = 496$ 对

### 3.2 配对计算

**方法**：

1. 选择第一只猫：$n$ 种选择
2. 选择第二只猫：$n-1$ 种选择
3. 总选择数：$n(n-1)$
4. 由于顺序不重要，除以2：$\frac{n(n-1)}{2}$

**例子**：3只猫（Butters, Tofu, Pop-Tart）

- 选择顺序：Butters-Tofu, Butters-Pop-Tart, Tofu-Butters, Tofu-Pop-Tart, Pop-Tart-Butters, Pop-Tart-Tofu
- 共6种，但每对计算了2次
- 实际配对：3对

### 3.3 为什么23只猫就超过50%？

**解释**：

- **23只猫**：253对
- **365天**：需要检查253对是否共享猫日
- **253 > 365/2**：因此概率超过50%

**直觉**：

- 虽然只有23只猫，但有253个"机会"找到共享猫日
- 253个机会分布在365天中，概率超过50%

---

## 四、应用与推广

### 4.1 实际应用

**密码学**：

- **哈希碰撞**：寻找两个输入产生相同哈希值
- **生日攻击**：利用生日悖论攻击哈希函数
- **安全设计**：确保哈希空间足够大

**数据库**：

- **唯一性检查**：估计重复数据的概率
- **索引设计**：优化数据库性能

**抽样**：

- **质量控制**：估计样本中重复的概率
- **统计调查**：设计调查方案

### 4.2 相关问题

**猫收集者问题 (Cat Collector's Problem)**：

- **问题**：有10种猫品种，平均需要收养多少只猫才能收集到所有品种？
- **答案**：约30只猫（期望值）
- **应用**：优惠券收集问题

**猫日问题（全年）**：

- **问题**：需要多少只猫才能确保每天都有猫日？
- **答案**：约2,365只猫（期望值）
- **应用**：确保全年都有庆祝活动

### 4.3 历史背景

**历史**：

- **1927年**：Harold Davenport首次陈述（未发表）
- **1937年**：Richard von Mises首次发表
- **原因**：Davenport认为这个问题肯定已经被研究过

**命名**：

- 通常称为"生日悖论"（Birthday Paradox）
- 在本书中称为"猫日问题"（Cat-Day Problem）

### 4.4 数学推广

**一般形式**：

- **$m$ 个可能值**（如365天）
- **$n$ 个样本**（如23只猫）
- **概率**：$P = 1 - \prod_{i=0}^{n-1} \frac{m-i}{m}$

**近似公式**（当 $n \ll m$ 时）：

$$P \approx 1 - e^{-\frac{n(n-1)}{2m}}$$

**例子**：$m = 365$，$n = 23$

$$P \approx 1 - e^{-\frac{23 \times 22}{2 \times 365}} = 1 - e^{-0.693} \approx 0.500$$

---

**最后更新**: 2025年12月11日
**参考章节**: Chapter 7
